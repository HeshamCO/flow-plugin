<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Flow</title>
		<script type="module" crossorigin>var e,t,n,r,s,i,a,o,l,c,d,u,v,f,p,h,g,m,w,x,b,y,k,q,$,_,j,S,z,I,P,E,M,U,T,N,C,O,L,A,F,R,W,D,V,B,Y=Object.defineProperty,H=e=>{throw TypeError(e)},J=(e,t,n)=>((e,t,n)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),K=(e,t,n)=>t.has(e)||H("Cannot "+n),G=(e,t,n)=>(K(e,t,"read from private field"),n?n.call(e):t.get(e)),Z=(e,t,n)=>t.has(e)?H("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Q=(e,t,n,r)=>(K(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),X=(e,t,n)=>(K(e,t,"access private method"),n);!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const ee=!1;var te=Array.isArray,ne=Array.prototype.indexOf,re=Array.prototype.includes,se=Array.from,ie=Object.defineProperty,ae=Object.getOwnPropertyDescriptor,oe=Object.getOwnPropertyDescriptors,le=Object.prototype,ce=Array.prototype,de=Object.getPrototypeOf,ue=Object.isExtensible;const ve=()=>{};function fe(e){return e()}function pe(e){for(var t=0;t<e.length;t++)e[t]()}function he(){var e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}const ge=16,me=32,we=64,xe=512,be=1024,ye=2048,ke=4096,qe=8192,$e=16384,_e=32768,je=65536,Se=1<<17,ze=1<<18,Ie=1<<19,Pe=1<<25,Ee=32768,Me=1<<21,Ue=1<<23,Te=Symbol("$state"),Ne=Symbol("legacy props"),Ce=Symbol(""),Oe=new class extends Error{constructor(){super(...arguments),J(this,"name","StaleReactionError"),J(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Le(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}const Ae=Symbol();function Fe(e){return e===this.v}function Re(e,t){return e!=e?t==t:e!==t||null!==e&&"object"==typeof e||"function"==typeof e}function We(e){return!Re(e,this.v)}let De=!1;let Ve=null;function Be(e){Ve=e}function Ye(e,t=!1,n){Ve={p:Ve,i:!1,c:null,e:null,s:e,x:null,l:De&&!t?{s:null,u:null,$:[]}:null}}function He(e){var t=Ve,n=t.e;if(null!==n)for(var r of(t.e=null,n))dn(r);return t.i=!0,Ve=t.p,{}}function Je(){return!De||null!==Ve&&null===Ve.l}let Ke=[];function Ge(){var e=Ke;Ke=[],pe(e)}function Ze(e){if(0===Ke.length&&!ft){var t=Ke;queueMicrotask(()=>{t===Ke&&Ge()})}Ke.push(e)}function Qe(){for(;Ke.length>0;)Ge()}function Xe(e){var t=Un;if(null===t)return Pn.f|=Ue,e;if(0===(t.f&_e)){if(!(128&t.f))throw e;t.b.error(e)}else et(e,t)}function et(e,t){for(;null!==t;){if(128&t.f)try{return void t.b.error(e)}catch(n){e=n}t=t.parent}throw e}const tt=-7169;function nt(e,t){e.f=e.f&tt|t}function rt(e){0!==(e.f&xe)||null===e.deps?nt(e,be):nt(e,ke)}function st(e){if(null!==e)for(const t of e)2&t.f&&0!==(t.f&Ee)&&(t.f^=Ee,st(t.deps))}function it(e,t,n){0!==(e.f&ye)?t.add(e):0!==(e.f&ke)&&n.add(e),st(e.deps),nt(e,be)}const at=new Set;let ot=null,lt=null,ct=null,dt=[],ut=null,vt=!1,ft=!1;e=new WeakMap,t=new WeakMap,n=new WeakMap,r=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakSet,d=function(e,t,n){e.f^=be;for(var r=e.first,s=null;null!==r;){var i=r.f,l=!!(96&i);if(!(l&&0!==(i&be)||0!==(i&qe)||G(this,o).has(r))&&null!==r.fn){l?r.f^=be:null!==s&&16777228&i?s.b.defer_effect(r):4&i?t.push(r):Vn(r)&&(0!==(i&ge)&&G(this,a).add(r),Kn(r));var c=r.first;if(null!==c){r=c;continue}}var d=r.parent;for(r=r.next;null===r&&null!==d;)d===s&&(s=null),r=d.next,d=d.parent}},u=function(e){for(var t=0;t<e.length;t+=1)it(e[t],G(this,i),G(this,a))},v=function(){var e;if(at.size>1){this.previous.clear();var t=ct,n=!0;for(const t of at){if(t===this){n=!1;continue}const s=[];for(const[e,r]of this.current){if(t.current.has(e)){if(!n||r===t.current.get(e))continue;t.current.set(e,r)}s.push(e)}if(0===s.length)continue;const i=[...t.current.keys()].filter(e=>!this.current.has(e));if(i.length>0){var r=dt;dt=[];const n=new Set,a=new Map;for(const e of s)xt(e,i,n,a);if(dt.length>0){ot=t,t.apply();for(const n of dt)X(e=t,c,d).call(e,n,[],[]);t.deactivate()}dt=r}}ot=null,ct=t}this.committed=!0,at.delete(this)};let pt=class f{constructor(){Z(this,c),J(this,"committed",!1),J(this,"current",new Map),J(this,"previous",new Map),Z(this,e,new Set),Z(this,t,new Set),Z(this,n,0),Z(this,r,0),Z(this,s,null),Z(this,i,new Set),Z(this,a,new Set),Z(this,o,new Map),J(this,"is_fork",!1),Z(this,l,!1)}is_deferred(){return this.is_fork||G(this,r)>0}skip_effect(e){G(this,o).has(e)||G(this,o).set(e,{d:[],m:[]})}unskip_effect(e){var t=G(this,o).get(e);if(t){for(var n of(G(this,o).delete(e),t.d))nt(n,ye),yt(n);for(n of t.m)nt(n,ke),yt(n)}}process(t){var r;dt=[],this.apply();var i=[],a=[];for(const e of t)X(this,c,d).call(this,e,i,a);if(this.is_deferred()){X(this,c,u).call(this,a),X(this,c,u).call(this,i);for(const[e,t]of G(this,o))kt(e,t)}else{for(const t of G(this,e))t();G(this,e).clear(),0===G(this,n)&&X(this,c,v).call(this),lt=this,ot=null,wt(a),wt(i),lt=null,null==(r=G(this,s))||r.resolve()}ct=null}capture(e,t){t===Ae||this.previous.has(e)||this.previous.set(e,t),0===(e.f&Ue)&&(this.current.set(e,e.v),null==ct||ct.set(e,e.v))}activate(){ot=this,this.apply()}deactivate(){ot===this&&(ot=null,ct=null)}flush(){if(this.activate(),dt.length>0){if(ht(),null!==ot&&ot!==this)return}else 0===G(this,n)&&this.process([]);this.deactivate()}discard(){for(const e of G(this,t))e(this);G(this,t).clear()}increment(e){Q(this,n,G(this,n)+1),e&&Q(this,r,G(this,r)+1)}decrement(e){Q(this,n,G(this,n)-1),e&&Q(this,r,G(this,r)-1),G(this,l)||(Q(this,l,!0),Ze(()=>{Q(this,l,!1),this.is_deferred()?dt.length>0&&this.flush():this.revive()}))}revive(){for(const e of G(this,i))G(this,a).delete(e),nt(e,ye),yt(e);for(const e of G(this,a))nt(e,ke),yt(e);this.flush()}oncommit(t){G(this,e).add(t)}ondiscard(e){G(this,t).add(e)}settled(){var e;return(null!=(e=G(this,s))?e:Q(this,s,he())).promise}static ensure(){if(null===ot){const e=ot=new f;at.add(ot),ft||Ze(()=>{ot===e&&e.flush()})}return ot}apply(){}};function ht(){vt=!0;try{for(var e=0;dt.length>0;){var t=pt.ensure();if(e++>1e3)ee,gt();t.process(dt),Ut.clear()}}finally{dt=[],vt=!1,ut=null}}function gt(){try{!function(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}()}catch(e){et(e,ut)}}let mt=null;function wt(e){var t=e.length;if(0!==t){for(var n=0;n<t;){var r=e[n++];if(!(24576&r.f)&&Vn(r)&&(mt=new Set,Kn(r),null===r.deps&&null===r.first&&null===r.nodes&&(null===r.teardown&&null===r.ac?yn(r):r.fn=null),(null==mt?void 0:mt.size)>0)){Ut.clear();for(const e of mt){if(24576&e.f)continue;const t=[e];let n=e.parent;for(;null!==n;)mt.has(n)&&(mt.delete(n),t.push(n)),n=n.parent;for(let e=t.length-1;e>=0;e--){const n=t[e];24576&n.f||Kn(n)}}mt.clear()}}mt=null}}function xt(e,t,n,r){if(!n.has(e)&&(n.add(e),null!==e.reactions))for(const s of e.reactions){const e=s.f;2&e?xt(s,t,n,r):4194320&e&&0===(e&ye)&&bt(s,t,r)&&(nt(s,ye),yt(s))}}function bt(e,t,n){const r=n.get(e);if(void 0!==r)return r;if(null!==e.deps)for(const s of e.deps){if(re.call(t,s))return!0;if(2&s.f&&bt(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function yt(e){for(var t=ut=e;null!==t.parent;){var n=(t=t.parent).f;if(vt&&t===Un&&0!==(n&ge)&&0===(n&ze))return;if(96&n){if(0===(n&be))return;t.f^=be}}dt.push(t)}function kt(e,t){if(0===(e.f&me)||0===(e.f&be)){0!==(e.f&ye)?t.d.push(e):0!==(e.f&ke)&&t.m.push(e),nt(e,be);for(var n=e.first;null!==n;)kt(n,t),n=n.next}}class qt{constructor(e,t,n){Z(this,E),J(this,"parent"),J(this,"is_pending",!1),Z(this,f),Z(this,p,null),Z(this,h),Z(this,g),Z(this,m),Z(this,w,null),Z(this,x,null),Z(this,b,null),Z(this,y,null),Z(this,k,null),Z(this,q,0),Z(this,$,0),Z(this,_,!1),Z(this,j,!1),Z(this,S,new Set),Z(this,z,new Set),Z(this,I,null),Z(this,P,function(e){let t,n=0,r=Nt(0);return()=>{on()&&(Zn(r),pn(()=>(0===n&&(t=er(()=>e(()=>Ft(r)))),n+=1,()=>{Ze(()=>{n-=1,0===n&&(null==t||t(),t=void 0,Ft(r))})})))}}(()=>(Q(this,I,Nt(G(this,q))),()=>{Q(this,I,null)}))),Q(this,f,e),Q(this,h,t),Q(this,g,n),this.parent=Un.b,this.is_pending=!!G(this,h).pending,Q(this,m,gn(()=>{Un.b=this;var e=X(this,E,M).call(this);try{Q(this,w,mn(()=>n(e)))}catch(t){this.error(t)}return G(this,$)>0?X(this,E,T).call(this):this.is_pending=!1,()=>{var e;null==(e=G(this,k))||e.remove()}},589952))}defer_effect(e){it(e,G(this,S),G(this,z))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!G(this,h).pending}update_pending_count(e){X(this,E,N).call(this,e),Q(this,q,G(this,q)+e),G(this,I)&&!G(this,_)&&(Q(this,_,!0),Ze(()=>{Q(this,_,!1),G(this,I)&&At(G(this,I),G(this,q))}))}get_effect_pending(){return G(this,P).call(this),Zn(G(this,I))}error(e){var t=G(this,h).onerror;let n=G(this,h).failed;if(G(this,j)||!t&&!n)throw e;G(this,w)&&(bn(G(this,w)),Q(this,w,null)),G(this,x)&&(bn(G(this,x)),Q(this,x,null)),G(this,b)&&(bn(G(this,b)),Q(this,b,null));var r=!1,s=!1;const i=()=>{r?console.warn("https://svelte.dev/e/svelte_boundary_reset_noop"):(r=!0,s&&function(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}(),pt.ensure(),Q(this,q,0),null!==G(this,b)&&kn(G(this,b),()=>{Q(this,b,null)}),this.is_pending=this.has_pending_snippet(),Q(this,w,X(this,E,U).call(this,()=>(Q(this,j,!1),mn(()=>G(this,g).call(this,G(this,f)))))),G(this,$)>0?X(this,E,T).call(this):this.is_pending=!1)};Ze(()=>{try{s=!0,null==t||t(e,i),s=!1}catch(r){et(r,G(this,m)&&G(this,m).parent)}n&&Q(this,b,X(this,E,U).call(this,()=>{pt.ensure(),Q(this,j,!0);try{return mn(()=>{n(G(this,f),()=>e,()=>i)})}catch(r){return et(r,G(this,m).parent),null}finally{Q(this,j,!1)}}))})}}function $t(e,t,n,r){const s=Je()?jt:zt;var i=e.filter(e=>!e.settled);if(0!==n.length||0!==i.length){var a,o,l,c,d=ot,u=Un,v=(a=Un,o=Pn,l=Ve,c=ot,function(e=!0){Tn(a),Mn(o),Be(l),e&&(null==c||c.activate())}),f=1===i.length?i[0].promise:i.length>1?Promise.all(i.map(e=>e.promise)):null;0!==n.length?f?f.then(h):h():f.then(()=>p(t.map(s)))}else r(t.map(s));function p(e){v();try{r(e)}catch(t){0===(u.f&$e)&&et(t,u)}null==d||d.deactivate(),_t()}function h(){v(),Promise.all(n.map(e=>St(e))).then(e=>p([...t.map(s),...e])).catch(e=>et(e,u))}}function _t(){Tn(null),Mn(null),Be(null)}function jt(e){var t=null!==Pn&&2&Pn.f?Pn:null;null!==Un&&(Un.f|=Ie);return{ctx:Ve,deps:null,effects:null,equals:Fe,f:2050,fn:e,reactions:null,rv:0,v:Ae,wv:0,parent:null!=t?t:Un,ac:null}}function St(e,t,n){let r=Un;null===r&&function(){throw new Error("https://svelte.dev/e/async_derived_orphan")}();var s=r.b,i=void 0,a=Nt(Ae),o=!Pn,l=new Map;return function(e){an(4718592,e,!0)}(()=>{var t,n=he();i=n.promise;try{Promise.resolve(e()).then(n.resolve,n.reject).then(()=>{r===ot&&r.committed&&r.deactivate(),_t()})}catch(u){n.reject(u),_t()}var r=ot;if(o){var c=s.is_rendered();s.update_pending_count(1),r.increment(c),null==(t=l.get(r))||t.reject(Oe),l.delete(r),l.set(r,n)}const d=(e,t=void 0)=>{if(r.activate(),t)t!==Oe&&(a.f|=Ue,At(a,t));else{0!==(a.f&Ue)&&(a.f^=Ue),At(a,e);for(const[e,t]of l){if(l.delete(e),e===r)break;t.reject(Oe)}}o&&(s.update_pending_count(-1),r.decrement(c))};n.promise.then(d,e=>d(null,e||"unknown"))}),ln(()=>{for(const e of l.values())e.reject(Oe)}),new Promise(e=>{!function t(n){function r(){n===i?e(a):t(i)}n.then(r,r)}(i)})}function zt(e){const t=jt(e);return t.equals=We,t}function It(e){var t=e.effects;if(null!==t){e.effects=null;for(var n=0;n<t.length;n+=1)bn(t[n])}}function Pt(e){var t,n=Un;Tn(function(e){for(var t=e.parent;null!==t;){if(!(2&t.f))return 0===(t.f&$e)?t:null;t=t.parent}return null}(e));try{e.f&=-32769,It(e),t=Yn(e)}finally{Tn(n)}return t}function Et(e){var t=Pt(e);e.equals(t)||(e.wv=Dn(),(null==ot?void 0:ot.is_fork)&&null!==e.deps||(e.v=t,null!==e.deps))?zn||(null!==ct?(on()||(null==ot?void 0:ot.is_fork))&&ct.set(e,t):rt(e)):nt(e,be)}f=new WeakMap,p=new WeakMap,h=new WeakMap,g=new WeakMap,m=new WeakMap,w=new WeakMap,x=new WeakMap,b=new WeakMap,y=new WeakMap,k=new WeakMap,q=new WeakMap,$=new WeakMap,_=new WeakMap,j=new WeakMap,S=new WeakMap,z=new WeakMap,I=new WeakMap,P=new WeakMap,E=new WeakSet,M=function(){var e=G(this,f);return this.is_pending&&(Q(this,k,Kt()),G(this,f).before(G(this,k)),e=G(this,k)),e},U=function(e){var t=Un,n=Pn,r=Ve;Tn(G(this,m)),Mn(G(this,m)),Be(G(this,m).ctx);try{return e()}catch(s){return Xe(s),null}finally{Tn(t),Mn(n),Be(r)}},T=function(){const e=G(this,h).pending;null!==G(this,w)&&(Q(this,y,document.createDocumentFragment()),G(this,y).append(G(this,k)),jn(G(this,w),G(this,y))),null===G(this,x)&&Q(this,x,mn(()=>e(G(this,f))))},N=function(e){var t;if(this.has_pending_snippet()){if(Q(this,$,G(this,$)+e),0===G(this,$)){this.is_pending=!1;for(const e of G(this,S))nt(e,ye),yt(e);for(const e of G(this,z))nt(e,ke),yt(e);G(this,S).clear(),G(this,z).clear(),G(this,x)&&kn(G(this,x),()=>{Q(this,x,null)}),G(this,y)&&(G(this,f).before(G(this,y)),Q(this,y,null))}}else this.parent&&X(t=this.parent,E,N).call(t,e)};let Mt=new Set;const Ut=new Map;let Tt=!1;function Nt(e,t){return{f:0,v:e,reactions:null,equals:Fe,rv:0,wv:0}}function Ct(e,t){const n=Nt(e);var r;return r=n,null!==Pn&&(null===Nn?Nn=[r]:Nn.push(r)),n}function Ot(e,t=!1,n=!0){var r,s;const i=Nt(e);return t||(i.equals=We),De&&n&&null!==Ve&&null!==Ve.l&&(null!=(s=(r=Ve.l).s)?s:r.s=[]).push(i),i}function Lt(e,t,n=!1){return null===Pn||En&&0===(Pn.f&Se)||!Je()||!(4325394&Pn.f)||null!==Nn&&re.call(Nn,e)||function(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}(),At(e,n?Wt(t):t)}function At(e,t){if(!e.equals(t)){var n=e.v;zn?Ut.set(e,t):Ut.set(e,n),e.v=t;var r=pt.ensure();if(r.capture(e,n),2&e.f){const t=e;0!==(e.f&ye)&&Pt(t),rt(t)}e.wv=Dn(),Rt(e,ye),!Je()||null===Un||0===(Un.f&be)||96&Un.f||(null===Ln?function(e){Ln=e}([e]):Ln.push(e)),!r.is_fork&&Mt.size>0&&!Tt&&function(){Tt=!1;for(const e of Mt)0!==(e.f&be)&&nt(e,ke),Vn(e)&&Kn(e);Mt.clear()}()}return t}function Ft(e){Lt(e,e.v+1)}function Rt(e,t){var n=e.reactions;if(null!==n)for(var r=Je(),s=n.length,i=0;i<s;i++){var a=n[i],o=a.f;if(r||a!==Un){var l=0===(o&ye);if(l&&nt(a,t),2&o){var c=a;null==ct||ct.delete(c),0===(o&Ee)&&(o&xe&&(a.f|=Ee),Rt(c,ke))}else l&&(0!==(o&ge)&&null!==mt&&mt.add(a),yt(a))}}}function Wt(e){if("object"!=typeof e||null===e||Te in e)return e;const t=de(e);if(t!==le&&t!==ce)return e;var n=new Map,r=te(e),s=Ct(0),i=Rn,a=e=>{if(Rn===i)return e();var t=Pn,n=Rn;Mn(null),Wn(i);var r=e();return Mn(t),Wn(n),r};return r&&n.set("length",Ct(e.length)),new Proxy(e,{defineProperty(e,t,r){"value"in r&&!1!==r.configurable&&!1!==r.enumerable&&!1!==r.writable||function(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}();var s=n.get(t);return void 0===s?s=a(()=>{var e=Ct(r.value);return n.set(t,e),e}):Lt(s,r.value,!0),!0},deleteProperty(e,t){var r=n.get(t);if(void 0===r){if(t in e){const e=a(()=>Ct(Ae));n.set(t,e),Ft(s)}}else Lt(r,Ae),Ft(s);return!0},get(t,r,s){var i;if(r===Te)return e;var o=n.get(r),l=r in t;if(void 0!==o||l&&!(null==(i=ae(t,r))?void 0:i.writable)||(o=a(()=>Ct(Wt(l?t[r]:Ae))),n.set(r,o)),void 0!==o){var c=Zn(o);return c===Ae?void 0:c}return Reflect.get(t,r,s)},getOwnPropertyDescriptor(e,t){var r=Reflect.getOwnPropertyDescriptor(e,t);if(r&&"value"in r){var s=n.get(t);s&&(r.value=Zn(s))}else if(void 0===r){var i=n.get(t),a=null==i?void 0:i.v;if(void 0!==i&&a!==Ae)return{enumerable:!0,configurable:!0,value:a,writable:!0}}return r},has(e,t){var r;if(t===Te)return!0;var s=n.get(t),i=void 0!==s&&s.v!==Ae||Reflect.has(e,t);if((void 0!==s||null!==Un&&(!i||(null==(r=ae(e,t))?void 0:r.writable)))&&(void 0===s&&(s=a(()=>Ct(i?Wt(e[t]):Ae)),n.set(t,s)),Zn(s)===Ae))return!1;return i},set(e,t,i,o){var l,c=n.get(t),d=t in e;if(r&&"length"===t)for(var u=i;u<c.v;u+=1){var v=n.get(u+"");void 0!==v?Lt(v,Ae):u in e&&(v=a(()=>Ct(Ae)),n.set(u+"",v))}void 0===c?d&&!(null==(l=ae(e,t))?void 0:l.writable)||(Lt(c=a(()=>Ct(void 0)),Wt(i)),n.set(t,c)):(d=c.v!==Ae,Lt(c,a(()=>Wt(i))));var f=Reflect.getOwnPropertyDescriptor(e,t);if((null==f?void 0:f.set)&&f.set.call(o,i),!d){if(r&&"string"==typeof t){var p=n.get("length"),h=Number(t);Number.isInteger(h)&&h>=p.v&&Lt(p,h+1)}Ft(s)}return!0},ownKeys(e){Zn(s);var t=Reflect.ownKeys(e).filter(e=>{var t=n.get(e);return void 0===t||t.v!==Ae});for(var[r,i]of n)i.v===Ae||r in e||t.push(r);return t},setPrototypeOf(){!function(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}()}})}function Dt(e){try{if(null!==e&&"object"==typeof e&&Te in e)return e[Te]}catch{}return e}function Vt(e,t){return Object.is(Dt(e),Dt(t))}var Bt,Yt,Ht,Jt;function Kt(e=""){return document.createTextNode(e)}function Gt(e){return Ht.call(e)}function Zt(e){return Jt.call(e)}function Qt(e,t){return Gt(e)}function Xt(e,t=!1){var n=Gt(e);return n instanceof Comment&&""===n.data?Zt(n):n}function en(e,t=1,n=!1){let r=e;for(;t--;)r=Zt(r);return r}let tn=!1;function nn(e){var t=Pn,n=Un;Mn(null),Tn(null);try{return e()}finally{Mn(t),Tn(n)}}function rn(e,t,n,r=n){e.addEventListener(t,()=>nn(n));const s=e.__on_r;e.__on_r=s?()=>{s(),r(!0)}:()=>r(!0),tn||(tn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)null==(t=n.__on_r)||t.call(n)})},{capture:!0}))}function sn(e){null===Un&&(null===Pn&&function(){throw new Error("https://svelte.dev/e/effect_orphan")}(),function(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}()),zn&&function(){throw new Error("https://svelte.dev/e/effect_in_teardown")}()}function an(e,t,n){var r,s=Un;null!==s&&0!==(s.f&qe)&&(e|=qe);var i={ctx:Ve,deps:null,nodes:null,f:e|ye|xe,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{Kn(i),i.f|=_e}catch(l){throw bn(i),l}else null!==t&&yt(i);var a=i;if(n&&null===a.deps&&null===a.teardown&&null===a.nodes&&a.first===a.last&&0===(a.f&Ie)&&(a=a.first,0!==(e&ge)&&0!==(e&je)&&null!==a&&(a.f|=je)),null!==a&&(a.parent=s,null!==s&&function(e,t){var n=t.last;null===n?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}(a,s),null!==Pn&&2&Pn.f&&0===(e&we))){var o=Pn;(null!=(r=o.effects)?r:o.effects=[]).push(a)}return i}function on(){return null!==Pn&&!En}function ln(e){const t=an(8,null,!1);return nt(t,be),t.teardown=e,t}function cn(e){var t;sn();var n=Un.f;if(!(!Pn&&0!==(n&me)&&0===(n&_e)))return dn(e);var r=Ve;(null!=(t=r.e)?t:r.e=[]).push(e)}function dn(e){return an(1048580,e,!1)}function un(e){return an(4,e,!1)}function vn(e,t){var n={effect:null,ran:!1,deps:e};Ve.l.$.push(n),n.effect=pn(()=>{e(),n.ran||(n.ran=!0,er(t))})}function fn(){var e=Ve;pn(()=>{for(var t of e.l.$){t.deps();var n=t.effect;0!==(n.f&be)&&null!==n.deps&&nt(n,ke),Vn(n)&&Kn(n),t.ran=!1}})}function pn(e,t=0){return an(8|t,e,!0)}function hn(e,t=[],n=[],r=[]){$t(r,t,n,t=>{an(8,()=>e(...t.map(Zn)),!0)})}function gn(e,t=0){return an(ge|t,e,!0)}function mn(e){return an(524320,e,!0)}function wn(e){var t=e.teardown;if(null!==t){const e=zn,n=Pn;In(!0),Mn(null);try{t.call(null)}finally{In(e),Mn(n)}}}function xn(e,t=!1){var n=e.first;for(e.first=e.last=null;null!==n;){const e=n.ac;null!==e&&nn(()=>{e.abort(Oe)});var r=n.next;0!==(n.f&we)?n.parent=null:bn(n,t),n=r}}function bn(e,t=!0){var n=!1;!t&&0===(e.f&ze)||null===e.nodes||null===e.nodes.end||(!function(e,t){for(;null!==e;){var n=e===t?null:Zt(e);e.remove(),e=n}}(e.nodes.start,e.nodes.end),n=!0),xn(e,t&&!n),Jn(e,0),nt(e,$e);var r=e.nodes&&e.nodes.t;if(null!==r)for(const i of r)i.stop();wn(e);var s=e.parent;null!==s&&null!==s.first&&yn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function yn(e){var t=e.parent,n=e.prev,r=e.next;null!==n&&(n.next=r),null!==r&&(r.prev=n),null!==t&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function kn(e,t,n=!0){var r=[];qn(e,r,!0);var s=()=>{n&&bn(e),t&&t()},i=r.length;if(i>0){var a=()=>--i||s();for(var o of r)o.out(a)}else s()}function qn(e,t,n){if(0===(e.f&qe)){e.f^=qe;var r=e.nodes&&e.nodes.t;if(null!==r)for(const e of r)(e.is_global||n)&&t.push(e);for(var s=e.first;null!==s;){var i=s.next;qn(s,t,!!(0!==(s.f&je)||0!==(s.f&me)&&0!==(e.f&ge))&&n),s=i}}}function $n(e){_n(e,!0)}function _n(e,t){if(0!==(e.f&qe)){e.f^=qe,0===(e.f&be)&&(nt(e,ye),yt(e));for(var n=e.first;null!==n;){var r=n.next;_n(n,!!(0!==(n.f&je)||0!==(n.f&me))&&t),n=r}var s=e.nodes&&e.nodes.t;if(null!==s)for(const e of s)(e.is_global||t)&&e.in()}}function jn(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;null!==n;){var s=n===r?null:Zt(n);t.append(n),n=s}}let Sn=!1,zn=!1;function In(e){zn=e}let Pn=null,En=!1;function Mn(e){Pn=e}let Un=null;function Tn(e){Un=e}let Nn=null;let Cn=null,On=0,Ln=null;let An=1,Fn=0,Rn=Fn;function Wn(e){Rn=e}function Dn(){return++An}function Vn(e){var t=e.f;if(0!==(t&ye))return!0;if(2&t&&(e.f&=-32769),0!==(t&ke)){for(var n=e.deps,r=n.length,s=0;s<r;s++){var i=n[s];if(Vn(i)&&Et(i),i.wv>e.wv)return!0}0!==(t&xe)&&null===ct&&nt(e,be)}return!1}function Bn(e,t,n=!0){var r=e.reactions;if(null!==r&&(null===Nn||!re.call(Nn,e)))for(var s=0;s<r.length;s++){var i=r[s];2&i.f?Bn(i,t,!1):t===i&&(n?nt(i,ye):0!==(i.f&be)&&nt(i,ke),yt(i))}}function Yn(e){var t,n,r=Cn,s=On,i=Ln,a=Pn,o=Nn,l=Ve,c=En,d=Rn,u=e.f;Cn=null,On=0,Ln=null,Pn=96&u?null:e,Nn=null,Be(e.ctx),En=!1,Rn=++Fn,null!==e.ac&&(nn(()=>{e.ac.abort(Oe)}),e.ac=null);try{e.f|=Me;var v=(0,e.fn)(),f=e.deps,p=null==ot?void 0:ot.is_fork;if(null!==Cn){var h;if(p||Jn(e,On),null!==f&&On>0)for(f.length=On+Cn.length,h=0;h<Cn.length;h++)f[On+h]=Cn[h];else e.deps=f=Cn;if(on()&&0!==(e.f&xe))for(h=On;h<f.length;h++)(null!=(n=(t=f[h]).reactions)?n:t.reactions=[]).push(e)}else!p&&null!==f&&On<f.length&&(Jn(e,On),f.length=On);if(Je()&&null!==Ln&&!En&&null!==f&&!(6146&e.f))for(h=0;h<Ln.length;h++)Bn(Ln[h],e);if(null!==a&&a!==e){if(Fn++,null!==a.deps)for(let e=0;e<s;e+=1)a.deps[e].rv=Fn;if(null!==r)for(const e of r)e.rv=Fn;null!==Ln&&(null===i?i=Ln:i.push(...Ln))}return 0!==(e.f&Ue)&&(e.f^=Ue),v}catch(g){return Xe(g)}finally{e.f^=Me,Cn=r,On=s,Ln=i,Pn=a,Nn=o,Be(l),En=c,Rn=d}}function Hn(e,t){let n=t.reactions;if(null!==n){var r=ne.call(n,e);if(-1!==r){var s=n.length-1;0===s?n=t.reactions=null:(n[r]=n[s],n.pop())}}if(null===n&&2&t.f&&(null===Cn||!re.call(Cn,t))){var i=t;0!==(i.f&xe)&&(i.f^=xe,i.f&=-32769),rt(i),It(i),Jn(i,0)}}function Jn(e,t){var n=e.deps;if(null!==n)for(var r=t;r<n.length;r++)Hn(e,n[r])}function Kn(e){var t=e.f;if(0===(t&$e)){nt(e,be);var n=Un,r=Sn;Un=e,Sn=!0;try{16777232&t?function(e){for(var t=e.first;null!==t;){var n=t.next;0===(t.f&me)&&bn(t),t=n}}(e):xn(e),wn(e);var s=Yn(e);e.teardown="function"==typeof s?s:null,e.wv=An}finally{Sn=r,Un=n}}}async function Gn(){await Promise.resolve(),function(){var e=ft;ft=!0;try{for(;;){if(Qe(),0===dt.length&&(null==ot||ot.flush(),0===dt.length))return void(ut=null);ht()}}finally{ft=e}}()}function Zn(e){var t,n=!!(2&e.f);if(null!==Pn&&!En&&!(null!==Un&&0!==(Un.f&$e)||null!==Nn&&re.call(Nn,e))){var r=Pn.deps;if(0!==(Pn.f&Me))e.rv<Fn&&(e.rv=Fn,null===Cn&&null!==r&&r[On]===e?On++:null===Cn?Cn=[e]:Cn.push(e));else{(null!=(t=Pn.deps)?t:Pn.deps=[]).push(e);var s=e.reactions;null===s?e.reactions=[Pn]:re.call(s,Pn)||s.push(Pn)}}if(zn&&Ut.has(e))return Ut.get(e);if(n){var i=e;if(zn){var a=i.v;return(0===(i.f&be)&&null!==i.reactions||Xn(i))&&(a=Pt(i)),Ut.set(i,a),a}var o=0===(i.f&xe)&&!En&&null!==Pn&&(Sn||0!==(Pn.f&xe)),l=null===i.deps;Vn(i)&&(o&&(i.f|=xe),Et(i)),o&&!l&&Qn(i)}if(null==ct?void 0:ct.has(e))return ct.get(e);if(0!==(e.f&Ue))throw e.v;return e.v}function Qn(e){var t;if(null!==e.deps){e.f|=xe;for(const n of e.deps)(null!=(t=n.reactions)?t:n.reactions=[]).push(e),2&n.f&&0===(n.f&xe)&&Qn(n)}}function Xn(e){if(e.v===Ae)return!0;if(null===e.deps)return!1;for(const t of e.deps){if(Ut.has(t))return!0;if(2&t.f&&Xn(t))return!0}return!1}function er(e){var t=En;try{return En=!0,e()}finally{En=t}}function tr(e){if("object"==typeof e&&e&&!(e instanceof EventTarget))if(Te in e)nr(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];"object"==typeof n&&n&&Te in n&&nr(n)}}function nr(e,t=new Set){if(!("object"!=typeof e||null===e||e instanceof EventTarget||t.has(e))){t.add(e),e instanceof Date&&e.getTime();for(let s in e)try{nr(e[s],t)}catch(n){}const r=de(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const t=oe(r);for(let r in t){const s=t[r].get;if(s)try{s.call(e)}catch(n){}}}}}const rr=["touchstart","touchmove"];function sr(e){return rr.includes(e)}const ir=new Set,ar=new Set;function or(e,t,n,r,s){var i={capture:r,passive:s},a=function(e,t,n,r={}){function s(e){if(r.capture||cr.call(t,e),!e.cancelBubble)return nn(()=>null==n?void 0:n.call(this,e))}return e.startsWith("pointer")||e.startsWith("touch")||"wheel"===e?Ze(()=>{t.addEventListener(e,s,r)}):t.addEventListener(e,s,r),s}(e,t,n,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&ln(()=>{t.removeEventListener(e,a,i)})}let lr=null;function cr(e){var t,n=this,r=n.ownerDocument,s=e.type,i=(null==(t=e.composedPath)?void 0:t.call(e))||[],a=i[0]||e.target;lr=e;var o=0,l=lr===e&&e.__root;if(l){var c=i.indexOf(l);if(-1!==c&&(n===document||n===window))return void(e.__root=n);var d=i.indexOf(n);if(-1===d)return;c<=d&&(o=c)}if((a=i[o]||e.target)!==n){ie(e,"currentTarget",{configurable:!0,get:()=>a||r});var u=Pn,v=Un;Mn(null),Tn(null);try{for(var f,p=[];null!==a;){var h=a.assignedSlot||a.parentNode||a.host||null;try{var g=a["__"+s];null==g||a.disabled&&e.target!==a||g.call(a,e)}catch(m){f?p.push(m):f=m}if(e.cancelBubble||h===n||null===h)break;a=h}if(f){for(let e of p)queueMicrotask(()=>{throw e});throw f}}finally{e.__root=n,delete e.currentTarget,Mn(u),Tn(v)}}}function dr(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","\x3c!----\x3e"),t.content}function ur(e,t){var n=Un;null===n.nodes&&(n.nodes={start:e,end:t,a:null,t:null})}function vr(e,t){var n,r=!!(1&t),s=!!(2&t),i=!e.startsWith("<!>");return()=>{void 0===n&&(n=dr(i?e:"<!>"+e),r||(n=Gt(n)));var t=s||Yt?document.importNode(n,!0):n.cloneNode(!0);r?ur(Gt(t),t.lastChild):ur(t,t);return t}}function fr(e,t,n="svg"){var r,s=!e.startsWith("<!>"),i=!!(1&t),a=`<${n}>${s?e:"<!>"+e}</${n}>`;return()=>{if(!r){var e=Gt(dr(a));if(i)for(r=document.createDocumentFragment();Gt(e);)r.appendChild(Gt(e));else r=Gt(e)}var t=r.cloneNode(!0);i?ur(Gt(t),t.lastChild):ur(t,t);return t}}function pr(e,t){return fr(e,t,"svg")}function hr(e=""){var t=Kt(e+"");return ur(t,t),t}function gr(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Kt();return e.append(t,n),ur(t,n),e}function mr(e,t){null!==e&&e.before(t)}let wr=!0;function xr(e,t){var n,r=null==t?"":"object"==typeof t?t+"":t;r!==(null!=(n=e.__t)?n:e.__t=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}const br=new Map;let yr=new WeakMap;class kr{constructor(e,t=!0){J(this,"anchor"),Z(this,C,new Map),Z(this,O,new Map),Z(this,L,new Map),Z(this,A,new Set),Z(this,F,!0),Z(this,R,()=>{var e=ot;if(G(this,C).has(e)){var t=G(this,C).get(e),n=G(this,O).get(t);if(n)$n(n),G(this,A).delete(t);else{var r=G(this,L).get(t);r&&(G(this,O).set(t,r.effect),G(this,L).delete(t),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),n=r.effect)}for(const[t,n]of G(this,C)){if(G(this,C).delete(t),t===e)break;const r=G(this,L).get(n);r&&(bn(r.effect),G(this,L).delete(n))}for(const[e,r]of G(this,O)){if(e===t||G(this,A).has(e))continue;const s=()=>{if(Array.from(G(this,C).values()).includes(e)){var t=document.createDocumentFragment();jn(r,t),t.append(Kt()),G(this,L).set(e,{effect:r,fragment:t})}else bn(r);G(this,A).delete(e),G(this,O).delete(e)};G(this,F)||!n?(G(this,A).add(e),kn(r,s,!1)):s()}}}),Z(this,W,e=>{G(this,C).delete(e);const t=Array.from(G(this,C).values());for(const[n,r]of G(this,L))t.includes(n)||(bn(r.effect),G(this,L).delete(n))}),this.anchor=e,Q(this,F,t)}ensure(e,t){var n=ot;!t||G(this,O).has(e)||G(this,L).has(e)||G(this,O).set(e,mn(()=>t(this.anchor)));G(this,C).set(n,e),G(this,R).call(this)}}function qr(e,t,n=!1){var r=new kr(e);function s(e,t){r.ensure(e,t)}gn(()=>{var e=!1;t((t,n=!0)=>{e=!0,s(n,t)}),e||s(!1,null)},n?je:0)}function $r(e,t){return t}function _r(e,t=!0){for(var n=0;n<e.length;n++)bn(e[n],t)}var jr;function Sr(e,t,n,r,s,i=null){var a=e,o=new Map;!(4&t)||(a=e.appendChild(Kt()));var l,c=null,d=zt(()=>{var e=n();return te(e)?e:null==e?[]:se(e)}),u=!0;function v(){f.fallback=c,function(e,t,n,r,s){var i,a,o,l,c,d,u,v,f,p,h,g,m,w,x=!!(8&r),b=t.length,y=e.items,k=zr(e.effect.first),q=null,$=[],_=[];if(x)for(w=0;w<b;w+=1)g=s(t[w],w),0===((m=y.get(g).e).f&Pe)&&(null==(a=null==(i=m.nodes)?void 0:i.a)||a.measure(),(null!=h?h:h=new Set).add(m));for(w=0;w<b;w+=1){if(g=s(t[w],w),m=y.get(g).e,null!==e.outrogroups)for(const t of e.outrogroups)t.pending.delete(m),t.done.delete(m);if(0!==(m.f&Pe)){if(m.f^=Pe,m!==k){var j=q?q.next:k;m===e.effect.last&&(e.effect.last=m.prev),m.prev&&(m.prev.next=m.next),m.next&&(m.next.prev=m.prev),Er(e,q,m),Er(e,m,j),Pr(m,j,n),$=[],_=[],k=zr((q=m).next);continue}Pr(m,null,n)}if(0!==(m.f&qe)&&($n(m),x&&(null==(l=null==(o=m.nodes)?void 0:o.a)||l.unfix(),(null!=h?h:h=new Set).delete(m))),m!==k){if(void 0!==p&&p.has(m)){if($.length<_.length){var S,z=_[0];q=z.prev;var I=$[0],P=$[$.length-1];for(S=0;S<$.length;S+=1)Pr($[S],z,n);for(S=0;S<_.length;S+=1)p.delete(_[S]);Er(e,I.prev,P.next),Er(e,q,I),Er(e,P,z),k=z,q=P,w-=1,$=[],_=[]}else p.delete(m),Pr(m,k,n),Er(e,m.prev,m.next),Er(e,m,null===q?e.effect.first:q.next),Er(e,q,m),q=m;continue}for($=[],_=[];null!==k&&k!==m;)(null!=p?p:p=new Set).add(k),_.push(k),k=zr(k.next);if(null===k)continue}0===(m.f&Pe)&&$.push(m),q=m,k=zr(m.next)}if(null!==e.outrogroups){for(const t of e.outrogroups)0===t.pending.size&&(_r(se(t.done)),null==(c=e.outrogroups)||c.delete(t));0===e.outrogroups.size&&(e.outrogroups=null)}if(null!==k||void 0!==p){var E=[];if(void 0!==p)for(m of p)0===(m.f&qe)&&E.push(m);for(;null!==k;)0===(k.f&qe)&&k!==e.fallback&&E.push(k),k=zr(k.next);var M=E.length;if(M>0){var U=4&r&&0===b?n:null;if(x){for(w=0;w<M;w+=1)null==(u=null==(d=E[w].nodes)?void 0:d.a)||u.measure();for(w=0;w<M;w+=1)null==(f=null==(v=E[w].nodes)?void 0:v.a)||f.fix()}!function(e,t,n){for(var r,s,i=t.length,a=t.length,o=0;o<i;o++){let n=t[o];kn(n,()=>{if(s){if(s.pending.delete(n),s.done.add(n),0===s.pending.size){var t=e.outrogroups;_r(se(s.done)),t.delete(s),0===t.size&&(e.outrogroups=null)}}else a-=1},!1)}if(0===a){var l=null!==n;if(l){var c=n,d=c.parentNode;d.textContent="",d.append(c),e.items.clear()}_r(t,!l)}else s={pending:new Set(t),done:new Set},(null!=(r=e.outrogroups)?r:e.outrogroups=new Set).add(s)}(e,E,U)}}x&&Ze(()=>{var e,t;if(void 0!==h)for(m of h)null==(t=null==(e=m.nodes)?void 0:e.a)||t.apply()})}(f,l,a,t,r),null!==c&&(0===l.length?0===(c.f&Pe)?$n(c):(c.f^=Pe,Pr(c,null,a)):kn(c,()=>{c=null}))}var f={effect:gn(()=>{for(var e=(l=Zn(d)).length,f=new Set,p=0;p<e;p+=1){var h=l[p],g=r(h,p),m=u?null:o.get(g);m?(m.v&&At(m.v,h),m.i&&At(m.i,p)):(m=Ir(o,u?a:null!=jr?jr:jr=Kt(),h,g,p,s,t,n),u||(m.e.f|=Pe),o.set(g,m)),f.add(g)}0===e&&i&&!c&&(u?c=mn(()=>i(a)):(c=mn(()=>i(null!=jr?jr:jr=Kt()))).f|=Pe),e>f.size&&function(){throw new Error("https://svelte.dev/e/each_key_duplicate")}(),u||v(),Zn(d)}),items:o,outrogroups:null,fallback:c};u=!1}function zr(e){for(;null!==e&&0===(e.f&me);)e=e.next;return e}function Ir(e,t,n,r,s,i,a,o){var l=1&a?16&a?Nt(n):Ot(n,!1,!1):null,c=2&a?Nt(s):null;return{v:l,i:c,e:mn(()=>(i(t,null!=l?l:n,null!=c?c:s,o),()=>{e.delete(r)}))}}function Pr(e,t,n){if(e.nodes)for(var r=e.nodes.start,s=e.nodes.end,i=t&&0===(t.f&Pe)?t.nodes.start:n;null!==r;){var a=Zt(r);if(i.before(r),r===s)return;r=a}}function Er(e,t,n){null===t?e.effect.first=n:t.next=n,null===n?e.effect.last=t:n.prev=t}function Mr(e,t,n,r,s){var i,a=null==(i=t.$$slots)?void 0:i[n],o=!1;!0===a&&(a=t.children,o=!0),void 0===a||a(e,o?()=>r:r)}C=new WeakMap,O=new WeakMap,L=new WeakMap,A=new WeakMap,F=new WeakMap,R=new WeakMap,W=new WeakMap;const Ur={tick:e=>requestAnimationFrame(e),now:()=>performance.now(),tasks:new Set};function Tr(){const e=Ur.now();Ur.tasks.forEach(t=>{t.c(e)||(Ur.tasks.delete(t),t.f())}),0!==Ur.tasks.size&&Ur.tick(Tr)}function Nr(e,t){nn(()=>{e.dispatchEvent(new CustomEvent(t))})}function Cr(e){if("float"===e)return"cssFloat";if("offset"===e)return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return 1===t.length?t[0]:t[0]+t.slice(1).map(e=>e[0].toUpperCase()+e.slice(1)).join("")}function Or(e){const t={},n=e.split(";");for(const r of n){const[e,n]=r.split(":");if(!e||void 0===n)break;t[Cr(e.trim())]=n.trim()}return t}const Lr=e=>e;function Ar(e,t,n,r,s){var i=1===r;if("function"==typeof t){var a,o=!1;return Ze(()=>{if(!o){var l=t({direction:i?"in":"out"});a=Ar(e,l,n,r,s)}}),{abort:()=>{o=!0,null==a||a.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(null==n||n.deactivate(),!(null==t?void 0:t.duration)&&!(null==t?void 0:t.delay))return Nr(e,i?"introstart":"outrostart"),s(),{abort:ve,deactivate:ve,reset:ve,t:()=>r};const{delay:l=0,css:c,tick:d,easing:u=Lr}=t;var v=[];if(i&&void 0===n&&(d&&d(0,1),c)){var f=Or(c(0,1));v.push(f,f)}var p=()=>1-r,h=e.animate(v,{duration:l,fill:"forwards"});return h.onfinish=()=>{var a;h.cancel(),Nr(e,i?"introstart":"outrostart");var o=null!=(a=null==n?void 0:n.t())?a:1-r;null==n||n.abort();var l=r-o,v=t.duration*Math.abs(l),f=[];if(v>0){var g=!1;if(c)for(var m=Math.ceil(v/(1e3/60)),w=0;w<=m;w+=1){var x=o+l*u(w/m),b=Or(c(x,1-x));f.push(b),g||(g="hidden"===b.overflow)}g&&(e.style.overflow="hidden"),p=()=>{var e=h.currentTime;return o+l*u(e/v)},d&&function(e){let t;0===Ur.tasks.size&&Ur.tick(Tr),new Promise(n=>{Ur.tasks.add(t={c:e,f:n})})}(()=>{if("running"!==h.playState)return!1;var e=p();return d(e,1-e),!0})}(h=e.animate(f,{duration:v,fill:"forwards"})).onfinish=()=>{p=()=>r,null==d||d(r,1-r),s()}},{abort:()=>{h&&(h.cancel(),h.effect=null,h.onfinish=ve)},deactivate:()=>{s=ve},reset:()=>{0===r&&(null==d||d(1,0))},t:()=>p()}}function Fr(e,t){un(()=>{var n,r=e.getRootNode(),s=r.host?r:null!=(n=r.head)?n:r.ownerDocument.head;if(!s.querySelector("#"+t.hash)){const e=document.createElement("style");e.id=t.hash,e.textContent=t.code,s.appendChild(e)}})}const Rr=[..." \t\n\r\f \v\ufeff"];function Wr(e,t,n,r,s,i){var a=e.__className;if(a!==n||void 0===a){var o=function(e,t,n){var r=null==e?"":""+e;if(t&&(r=r?r+" "+t:t),n)for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var i=s.length,a=0;(a=r.indexOf(s,a))>=0;){var o=a+i;0!==a&&!Rr.includes(r[a-1])||o!==r.length&&!Rr.includes(r[o])?a=o:r=(0===a?"":r.substring(0,a))+r.substring(o+1)}return""===r?null:r}(n,r,i);null==o?e.removeAttribute("class"):e.className=o,e.__className=n}else if(i&&s!==i)for(var l in i){var c=!!i[l];null!=s&&c===!!s[l]||e.classList.toggle(l,c)}return i}function Dr(e,t,n,r){if(e.__style!==t){var s=function(e){return null==e?null:String(e)}(t);null==s?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}return r}function Vr(e,t,n=!1){if(e.multiple){if(null==t)return;if(!te(t))return void console.warn("https://svelte.dev/e/select_multiple_invalid_value");for(var r of e.options)r.selected=t.includes(Br(r))}else{for(r of e.options){if(Vt(Br(r),t))return void(r.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}}function Br(e){return"__value"in e?e.__value:e.value}const Yr=Symbol("is custom element"),Hr=Symbol("is html");function Jr(e,t){var n=Gr(e);n.checked!==(n.checked=null!=t?t:void 0)&&(e.checked=t)}function Kr(e,t,n,r){var s=Gr(e);s[t]!==(s[t]=n)&&("loading"===t&&(e[Ce]=n),null==n?e.removeAttribute(t):"string"!=typeof n&&function(e){var t,n=e.getAttribute("is")||e.nodeName,r=Zr.get(n);if(r)return r;Zr.set(n,r=[]);var s=e,i=Element.prototype;for(;i!==s;){for(var a in t=oe(s))t[a].set&&r.push(a);s=de(s)}return r}(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Gr(e){var t;return null!=(t=e.__attributes)?t:e.__attributes={[Yr]:e.nodeName.includes("-"),[Hr]:"http://www.w3.org/1999/xhtml"===e.namespaceURI}}var Zr=new Map;function Qr(e,t,n=t){var r=new WeakSet;rn(e,"input",async s=>{var i=s?e.defaultValue:e.value;if(i=Xr(e)?es(i):i,n(i),null!==ot&&r.add(ot),await Gn(),i!==(i=t())){var a=e.selectionStart,o=e.selectionEnd,l=e.value.length;if(e.value=null!=i?i:"",null!==o){var c=e.value.length;a===o&&o===l&&c>l?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=a,e.selectionEnd=Math.min(o,c))}}}),null==er(t)&&e.value&&(n(Xr(e)?es(e.value):e.value),null!==ot&&r.add(ot)),pn(()=>{var n=t();if(e===document.activeElement){var s=null!=lt?lt:ot;if(r.has(s))return}Xr(e)&&n===es(e.value)||("date"!==e.type||n||e.value)&&n!==e.value&&(e.value=null!=n?n:"")})}function Xr(e){var t=e.type;return"number"===t||"range"===t}function es(e){return""===e?null:+e}function ts(e=!1){const t=Ve,n=t.l.u;if(!n)return;let r=()=>tr(t.s);if(e){let e=0,n={};const s=jt(()=>{let r=!1;const s=t.s;for(const e in s)s[e]!==n[e]&&(n[e]=s[e],r=!0);return r&&e++,e});r=()=>Zn(s)}var s;n.b.length&&(s=()=>{ns(t,r),pe(n.b)},sn(),an(1048584,s,!0)),cn(()=>{const e=er(()=>n.m.map(fe));return()=>{for(const t of e)"function"==typeof t&&t()}}),n.a.length&&cn(()=>{ns(t,r),pe(n.a)})}function ns(e,t){if(e.l.s)for(const n of e.l.s)Zn(n);t()}function rs(e,t){var n,r=null==(n=e.$$events)?void 0:n[t.type],s=te(r)?r.slice():null==r?[]:[r];for(var i of s)i.call(this,t)}function ss(e,t,n){if(null==e)return t(void 0),n&&n(void 0),ve;const r=er(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const is=[];function as(e,t=ve){let n=null;const r=new Set;function s(t){if(Re(e,t)&&(e=t,n)){const t=!is.length;for(const n of r)n[1](),is.push(n,e);if(t){for(let e=0;e<is.length;e+=2)is[e][0](is[e+1]);is.length=0}}}function i(t){s(t(e))}return{set:s,update:i,subscribe:function(a,o=ve){const l=[a,o];return r.add(l),1===r.size&&(n=t(s,i)||ve),a(e),()=>{r.delete(l),0===r.size&&n&&(n(),n=null)}}}}function os(e,t,n){const r=!Array.isArray(e),s=r?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return a=(e,n)=>{let a=!1;const o=[];let l=0,c=ve;const d=()=>{if(l)return;c();const s=t(r?o[0]:o,e,n);i?e(s):c="function"==typeof s?s:ve},u=s.map((e,t)=>ss(e,e=>{o[t]=e,l&=~(1<<t),a&&d()},()=>{l|=1<<t}));return a=!0,d(),function(){pe(u),c(),a=!1}},{subscribe:as(n,a).subscribe};var a}function ls(e){let t;return ss(e,e=>t=e)(),t}let cs=!1,ds=Symbol();function us(e,t,n){var r;const s=null!=(r=n[t])?r:n[t]={store:null,source:Ot(void 0),unsubscribe:ve};if(s.store!==e&&!(ds in n))if(s.unsubscribe(),s.store=null!=e?e:null,null==e)s.source.v=void 0,s.unsubscribe=ve;else{var i=!0;s.unsubscribe=ss(e,e=>{i?s.source.v=e:Lt(s.source,e)}),i=!1}return e&&ds in n?ls(e):Zn(s.source)}function vs(){const e={};return[e,function(){ln(()=>{for(var t in e){e[t].unsubscribe()}ie(e,ds,{enumerable:!1,value:!0})})}]}function fs(e,t,n,r){var s,i,a,o,l=!De||!!(2&n),c=!!(8&n),d=!!(16&n),u=r,v=!0,f=()=>(v&&(v=!1,u=d?er(r):r),u);if(c){var p=Te in e||Ne in e;a=null!=(i=null==(s=ae(e,t))?void 0:s.set)?i:p&&t in e?n=>e[t]=n:void 0}var h,g=!1;if(c?[o,g]=function(e){var t=cs;try{return cs=!1,[e(),cs]}finally{cs=t}}(()=>e[t]):o=e[t],void 0===o&&void 0!==r&&(o=f(),a&&(l&&function(){throw new Error("https://svelte.dev/e/props_invalid_value")}(),a(o))),h=l?()=>{var n=e[t];return void 0===n?f():(v=!0,n)}:()=>{var n=e[t];return void 0!==n&&(u=void 0),void 0===n?u:n},l&&!(4&n))return h;if(a){var m=e.$$legacy;return function(e,t){return arguments.length>0?(l&&t&&!m&&!g||a(t?h():e),e):h()}}var w=!1,x=(1&n?jt:zt)(()=>(w=!1,h()));c&&Zn(x);var b=Un;return function(e,t){if(arguments.length>0){const n=t?Zn(x):l&&c?Wt(e):e;return Lt(x,n),w=!0,void 0!==u&&(u=n),e}return zn&&w||0!==(b.f&$e)?x.v:Zn(x)}}function ps(e){var t,n,r;null===Ve&&Le(),De&&null!==Ve.l?(t=Ve,r=t.l,null!=(n=r.u)?n:r.u={a:[],b:[],m:[]}).m.push(e):cn(()=>{const t=er(e);if("function"==typeof t)return t})}"undefined"!=typeof window&&(null!=(B=(V=null!=(D=window.__svelte)?D:window.__svelte={}).v)?B:V.v=new Set).add("5"),De=!0;const hs=new Map;function gs(e,t){try{const n="string"==typeof t?t:JSON.stringify(t||"");window.postMessage(e,n)}catch(n){console.error("[bridge] pluginCall error:",n)}}function ms(e,t){return hs.has(e)||hs.set(e,[]),hs.get(e).push(t),()=>{const n=hs.get(e);if(n){const e=n.indexOf(t);e>=0&&n.splice(e,1)}}}const ws=new Map,xs=new Map,bs=new Map;function ys(e,t=12e4){return new Promise((n,r)=>{const s=xs.get(e);s&&(clearTimeout(s.timer),s.reject(new Error("Superseded by new request")));const i=setTimeout(()=>{xs.delete(e),r(new Error(`Image export timed out for "${e}"`))},t);xs.set(e,{resolve:n,reject:r,timer:i}),gs("exportArtboard",e)})}const ks=as("light");const qs=as("connect"),$s=as("connect");function _s(e){$s.set(ls(qs)),qs.set(e)}const js=as({...{serverUrl:"",authToken:"",userEmail:"",userName:"",lastProjectId:"",authMode:"login",projects:[],selectedProjectId:null,selectedProjectName:"",documentData:null,projectVersions:[],selectedVersionId:null,alreadyUploadedIds:new Set,loadingVersionScreens:!1,handoffLock:null,versionRevisions:[],selectedRevisionId:null,checkinNote:""}});function Ss(e){js.update(t=>({...t,...e}))}function zs(){Ss({authToken:"",userEmail:"",userName:""}),gs("logout"),_s("connect")}os(js,e=>!!e.serverUrl&&!!e.authToken),os(js,e=>!!e.serverUrl);const Is=as(new Set);function Ps(e){Is.set(new Set(e))}function Es(e){Ss({selectedVersionId:e})}function Ms(){Ss({selectedVersionId:null,alreadyUploadedIds:new Set,versionRevisions:[],selectedRevisionId:null})}const Us={isPublishing:!1,step:"creating",versionId:null,revisionId:null,queue:[],uploadedIds:new Set,stats:{screens:0,flows:0,tokens:0},percent:0,detail:"Preparing…",startTime:0,elapsed:"0s",error:null,cancelled:!1},Ts=as({...Us});function Ns(e){Ts.update(t=>({...t,...e}))}function Cs(){Ts.set({...Us})}function Os(e,t,n){Ts.update(r=>({...r,queue:r.queue.map(r=>r.id===e?{...r,status:t,error:n}:r)}))}let Ls=null;function As(){Ls&&(clearInterval(Ls),Ls=null)}const Fs=os(Ts,e=>({percent:e.percent,detail:e.detail,elapsed:e.elapsed,step:e.step,error:e.error,stats:e.stats,queue:e.queue,isPublishing:e.isPublishing,cancelled:e.cancelled}));let Rs=0;const Ws=as([]);function Ds(e,t="info",n=4e3){const r=++Rs,s=Date.now()+n;Ws.update(n=>[...n,{id:r,message:e,type:t,dismissAt:s}]),setTimeout(()=>{Vs(r)},n)}function Vs(e){Ws.update(t=>t.filter(t=>t.id!==e))}async function Bs(e,t={}){const n=ls(js),r={...t.headers||{}},s=(t.method||"GET").toUpperCase(),i=t.body instanceof FormData;["POST","PUT","PATCH"].includes(s)&&!i&&(r["Content-Type"]=r["Content-Type"]||"application/json"),n.authToken&&(r.Authorization=`Bearer ${n.authToken}`);const a=await fetch(e,{...t,headers:r});if(401===a.status)throw zs(),Ds("Session expired — please log in again.","warning"),new Error("Authentication expired");return a}async function Ys(e,t,n){try{const r=await Bs(`${e}/projects/${t}/versions/${n}/uploaded-screens`);if(r.ok){return(await r.json()).sketchIds||[]}}catch{}return[]}async function Hs(e,t,n={}){const r=await Bs(`${e}/projects/${t}/handoff/checkout`,{method:"POST",body:JSON.stringify(n)});if(!r.ok){const e=await r.json().catch(()=>({error:`Server returned ${r.status}`}));throw new Error(e.error||"Failed to checkout lock")}return(await r.json()).lock}async function Js(e,t){const n=await Bs(`${e}/projects/${t}/handoff/release`,{method:"POST",body:JSON.stringify({})});if(!n.ok){const e=await n.json().catch(()=>({error:`Server returned ${n.status}`}));throw new Error(e.error||"Failed to release lock")}}function Ks(e){try{const t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}}var Gs=vr('<span class="spinner svelte-7cp3og"></span>'),Zs=vr("<button><!></button>");const Qs={hash:"svelte-7cp3og",code:".btn.svelte-7cp3og {display:inline-flex;align-items:center;justify-content:center;gap:6px;padding:8px 16px;border:1px solid transparent;border-radius:var(--radius);font-size:13px;font-weight:500;font-family:var(--font);cursor:pointer;transition:all var(--transition);outline:none;text-decoration:none;white-space:nowrap;min-height:34px;}.btn.svelte-7cp3og:focus-visible {box-shadow:0 0 0 2px var(--bg),\n\t\t\t0 0 0 4px var(--ring);}.btn.svelte-7cp3og:disabled {opacity:0.5;cursor:not-allowed;}.btn-primary.svelte-7cp3og {background:var(--primary);color:var(--primary-foreground);}.btn-primary.svelte-7cp3og:hover:not(:disabled) {background:var(--primary-hover);}.btn-secondary.svelte-7cp3og {background:var(--bg);color:var(--text);border-color:var(--border);}.btn-secondary.svelte-7cp3og:hover:not(:disabled) {background:var(--accent);color:var(--accent-foreground);}.btn-ghost.svelte-7cp3og {background:transparent;color:var(--text-secondary);padding:6px 8px;}.btn-ghost.svelte-7cp3og:hover:not(:disabled) {color:var(--text);background:var(--accent);}.btn-danger.svelte-7cp3og {background:var(--error);color:#fff;}.btn-danger.svelte-7cp3og:hover:not(:disabled) {opacity:0.9;}.btn-block.svelte-7cp3og {width:100%;}.btn-sm.svelte-7cp3og {padding:5px 10px;font-size:12px;min-height:28px;}.btn-icon.svelte-7cp3og {width:30px;height:30px;padding:0;border-radius:6px;}.spinner.svelte-7cp3og {width:16px;height:16px;border:2px solid rgba(255, 255, 255, 0.3);border-top-color:#fff;border-radius:50%;\n\t\tanimation: svelte-7cp3og-spin 600ms linear infinite;}.btn-secondary.svelte-7cp3og .spinner:where(.svelte-7cp3og),\n\t.btn-ghost.svelte-7cp3og .spinner:where(.svelte-7cp3og) {border-color:var(--border);border-top-color:var(--text);}\n\n\t@keyframes svelte-7cp3og-spin {\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}"};function Xs(e,t){Fr(e,Qs);let n=fs(t,"variant",8,"primary"),r=fs(t,"size",8,"default"),s=fs(t,"block",8,!1),i=fs(t,"disabled",8,!1),a=fs(t,"loading",8,!1),o=fs(t,"type",8,"button");var l=Zs();let c;var d=Qt(l),u=e=>{mr(e,Gs())},v=e=>{var n=gr();Mr(Xt(n),t,"default",{}),mr(e,n)};qr(d,e=>{a()?e(u):e(v,!1)}),hn(()=>{var e;Kr(l,"type",o()),l.disabled=i(),c=Wr(l,0,`btn btn-${null!=(e=n())?e:""} ${"sm"===r()?"btn-sm":""} ${"icon"===r()?"btn-icon":""} ${s()?"btn-block":""}`,"svelte-7cp3og",c,{loading:a()})}),or("click",l,function(e){rs.call(this,t,e)}),or("keydown",l,function(e){rs.call(this,t,e)}),mr(e,l)}var ei=vr('<label class="form-label svelte-2isa9k"> </label>'),ti=pr('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>'),ni=pr('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>'),ri=vr('<button class="toggle-password svelte-2isa9k" type="button" tabindex="-1"><!></button>'),si=vr('<p class="form-hint svelte-2isa9k"> </p>'),ii=vr('<div class="form-group svelte-2isa9k"><!> <div class="input-wrapper svelte-2isa9k"><input class="form-input svelte-2isa9k"/> <!></div> <!></div>');const ai={hash:"svelte-2isa9k",code:".form-group.svelte-2isa9k {margin-bottom:14px;}.form-label.svelte-2isa9k {display:block;font-size:13px;font-weight:500;color:var(--text);margin-bottom:6px;}.input-wrapper.svelte-2isa9k {position:relative;}.form-input.svelte-2isa9k {width:100%;padding:8px 10px;border:1px solid var(--input);border-radius:var(--radius);font-size:13px;font-family:var(--font);color:var(--text);background:transparent;transition:border-color var(--transition),\n\t\t\tbox-shadow var(--transition);outline:none;}.form-input.svelte-2isa9k:focus {border-color:var(--ring);box-shadow:0 0 0 2px var(--bg),\n\t\t\t0 0 0 4px var(--ring);}.form-input.svelte-2isa9k::placeholder {color:var(--text-muted);}.form-hint.svelte-2isa9k {font-size:11px;color:var(--text-muted);margin-top:4px;}.toggle-password.svelte-2isa9k {position:absolute;right:8px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;color:var(--text-muted);padding:2px;display:flex;align-items:center;}.toggle-password.svelte-2isa9k:hover {color:var(--text-secondary);}"};function oi(e,t){Ye(t,!1),Fr(e,ai);const n=Ot();let r=fs(t,"label",8,""),s=fs(t,"type",8,"text"),i=fs(t,"placeholder",8,""),a=fs(t,"value",12,""),o=fs(t,"hint",8,""),l=fs(t,"disabled",8,!1),c=fs(t,"showPasswordToggle",8,!1),d=Ot(!1),u=`input-${Math.random().toString(36).slice(2,9)}`;vn(()=>(tr(s()),Zn(d)),()=>{Lt(n,"password"===s()&&Zn(d)?"text":s())}),fn(),ts();var v=ii(),f=Qt(v),p=e=>{var t=ei(),n=Qt(t);hn(()=>{Kr(t,"for",u),xr(n,r())}),mr(e,t)};qr(f,e=>{r()&&e(p)});var h=en(f,2),g=Qt(h),m=en(g,2),w=e=>{var t=ri(),n=Qt(t),r=e=>{mr(e,ti())},s=e=>{mr(e,ni())};qr(n,e=>{Zn(d)?e(r):e(s,!1)}),hn(()=>Kr(t,"title",Zn(d)?"Hide password":"Show password")),or("click",t,()=>Lt(d,!Zn(d))),mr(e,t)};qr(m,e=>{"password"===s()&&c()&&e(w)});var x=en(h,2),b=e=>{var t=si(),n=Qt(t);hn(()=>xr(n,o())),mr(e,t)};qr(x,e=>{o()&&e(b)}),hn(()=>{Kr(g,"id",u),Kr(g,"type",Zn(n)),Kr(g,"placeholder",i()),g.disabled=l()}),Qr(g,a),or("input",g,function(e){rs.call(this,t,e)}),or("keydown",g,function(e){rs.call(this,t,e)}),mr(e,v),He()}var li=vr("<div> </div>");const ci={hash:"svelte-9os5fq",code:".alert.svelte-9os5fq {padding:10px 12px;border-radius:var(--radius);font-size:12px;font-weight:500;margin-bottom:12px;border:1px solid transparent;\n\t\tanimation: svelte-9os5fq-fadeIn 150ms ease;}.alert-error.svelte-9os5fq {background:var(--error-light);border-color:var(--error);color:#991b1b;}.alert-success.svelte-9os5fq {background:var(--success-light);border-color:var(--success);color:#065f46;}.alert-warning.svelte-9os5fq {background:var(--warning-light);border-color:var(--warning);color:#92400e;}[data-theme='dark'] .alert-error {color:var(--error);}[data-theme='dark'] .alert-success {color:var(--success);}[data-theme='dark'] .alert-warning {color:var(--warning);}\n\n\t@keyframes svelte-9os5fq-fadeIn {\n\t\tfrom {\n\t\t\topacity: 0;\n\t\t\ttransform: translateY(-4px);\n\t\t}\n\t\tto {\n\t\t\topacity: 1;\n\t\t\ttransform: translateY(0);\n\t\t}\n\t}"};function di(e,t){Fr(e,ci);let n=fs(t,"type",8,"error"),r=fs(t,"message",8,""),s=fs(t,"show",8,!1);var i=gr(),a=Xt(i),o=e=>{var t=li(),s=Qt(t);hn(()=>{var e;Wr(t,0,`alert alert-${null!=(e=n())?e:""}`,"svelte-9os5fq"),xr(s,r())}),mr(e,t)};qr(a,e=>{s()&&r()&&e(o)}),mr(e,i)}var ui=vr("<!> <!>",1),vi=vr('<div class="connect-view svelte-3sr4mt"><div class="welcome svelte-3sr4mt"><div class="welcome-icon svelte-3sr4mt">🌉</div> <h2 class="svelte-3sr4mt">Welcome to Flow</h2> <p class="text-secondary svelte-3sr4mt">Connect to your Flow server to start publishing designs.</p></div> <!> <!> <div class="divider svelte-3sr4mt"></div> <div class="auth-header svelte-3sr4mt"><span class="section-title svelte-3sr4mt">Account</span> <!></div> <!> <!> <!> <!></div>');const fi={hash:"svelte-3sr4mt",code:".connect-view.svelte-3sr4mt {\n\t\tanimation: svelte-3sr4mt-fadeIn 200ms ease;}.welcome.svelte-3sr4mt {text-align:center;margin-bottom:20px;}.welcome-icon.svelte-3sr4mt {font-size:36px;margin-bottom:8px;}.welcome.svelte-3sr4mt h2:where(.svelte-3sr4mt) {font-size:17px;font-weight:600;letter-spacing:-0.3px;margin-bottom:4px;}.welcome.svelte-3sr4mt .text-secondary:where(.svelte-3sr4mt) {color:var(--text-muted);font-size:12px;}.divider.svelte-3sr4mt {height:1px;background:var(--border);margin:16px 0;}.auth-header.svelte-3sr4mt {display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;}.section-title.svelte-3sr4mt {font-size:13px;font-weight:500;color:var(--text-secondary);}\n\n\t@keyframes svelte-3sr4mt-fadeIn {\n\t\tfrom {\n\t\t\topacity: 0;\n\t\t\ttransform: translateY(4px);\n\t\t}\n\t\tto {\n\t\t\topacity: 1;\n\t\t\ttransform: translateY(0);\n\t\t}\n\t}"};function pi(e,t){Ye(t,!1),Fr(e,fi);const n=()=>us(js,"$appState",r),[r,s]=vs(),i=Ot();let a=Ot(n().serverUrl),o=Ot(""),l=Ot(""),c=Ot(""),d=Ot(""),u=Ot(!1),v=Ot("");async function f(){Lt(v,"");const e=Zn(a).replace(/\/+$/,"");if(e)if(Ks(e))if(Zn(o)&&Zn(l))if("register"===Zn(i)&&Zn(l).length<6)Lt(v,"Password must be at least 6 characters.");else if("register"===Zn(i)&&Zn(c).length<3)Lt(v,"Username must be at least 3 characters.");else if("register"!==Zn(i)||/^[a-zA-Z0-9_-]+$/.test(Zn(c))){Lt(u,!0);try{const t=await async function(e){try{const t=new AbortController,n=setTimeout(()=>t.abort(),5e3),r=await fetch(`${e}/health`,{signal:t.signal}).catch(()=>null);return clearTimeout(n),null!==r&&r.ok}catch{return!1}}(e);if(!t)return Lt(v,"Server is unreachable. Please check the URL and try again."),void Lt(u,!1);const n="register"===Zn(i)?await async function(e,t,n,r,s){const i=await Bs(`${e}/auth/register`,{method:"POST",body:JSON.stringify({email:t,username:n,password:r,name:s||void 0})});if(!i.ok){const e=await i.json().catch(()=>({error:`Server returned ${i.status}`}));throw new Error(e.error||`Server returned ${i.status}`)}return i.json()}(e,Zn(o),Zn(c),Zn(l),Zn(d)||void 0):await async function(e,t,n){const r=await Bs(`${e}/auth/login`,{method:"POST",body:JSON.stringify({email:t,password:n})});if(!r.ok){const e=await r.json().catch(()=>({error:`Server returned ${r.status}`}));throw new Error(e.error||`Server returned ${r.status}`)}return r.json()}(e,Zn(o),Zn(l));Ss({serverUrl:e,authToken:n.token,userEmail:n.user.email,userName:n.user.name||""}),gs("saveServerUrl",e),gs("saveAuth",JSON.stringify({token:n.token,email:n.user.email,name:n.user.name||""})),Ds("register"===Zn(i)?"Account created! Welcome to Flow.":"Logged in successfully.","success"),_s("projects")}catch(t){Lt(v,t.message||"Could not connect to server.")}finally{Lt(u,!1)}}else Lt(v,"Username can only contain letters, numbers, underscores, and dashes.");else Lt(v,"Please enter email and password.");else Lt(v,"Please enter a valid URL (http:// or https://).");else Lt(v,"Please enter the server URL.")}function p(e){"Enter"===e.key&&f()}vn(()=>n(),()=>{Lt(i,n().authMode)}),fn(),ts();var h=vi(),g=en(Qt(h),2);{let e=zt(()=>!!Zn(v));di(g,{type:"error",get message(){return Zn(v)},get show(){return Zn(e)}})}var m=en(g,2);oi(m,{label:"Server URL",type:"url",placeholder:"http://localhost:4400",hint:"The URL of your Flow server instance",get value(){return Zn(a)},set value(e){Lt(a,e)},$$events:{keydown:p},$$legacy:!0});var w=en(m,4);Xs(en(Qt(w),2),{variant:"ghost",size:"sm",$$events:{click:function(){Ss({authMode:"login"===Zn(i)?"register":"login"}),Lt(v,"")}},children:(e,t)=>{var n=hr();hn(()=>xr(n,"login"===Zn(i)?"Need an account? Register":"Already have an account? Login")),mr(e,n)},$$slots:{default:!0}});var x=en(w,2);oi(x,{label:"Email",type:"email",placeholder:"you@company.com",get value(){return Zn(o)},set value(e){Lt(o,e)},$$events:{keydown:p},$$legacy:!0});var b=en(x,2);oi(b,{label:"Password",type:"password",placeholder:"••••••••",showPasswordToggle:!0,get value(){return Zn(l)},set value(e){Lt(l,e)},$$events:{keydown:p},$$legacy:!0});var y=en(b,2),k=e=>{var t=ui(),n=Xt(t);oi(n,{label:"Username",type:"text",placeholder:"your_username",hint:"3-30 characters, letters, numbers, _ and -",get value(){return Zn(c)},set value(e){Lt(c,e)},$$events:{keydown:p},$$legacy:!0}),oi(en(n,2),{label:"Name (optional)",type:"text",placeholder:"Your name",get value(){return Zn(d)},set value(e){Lt(d,e)},$$events:{keydown:p},$$legacy:!0}),mr(e,t)};qr(y,e=>{"register"===Zn(i)&&e(k)}),Xs(en(y,2),{variant:"primary",block:!0,get loading(){return Zn(u)},$$events:{click:f},children:(e,t)=>{var n=hr();hn(()=>xr(n,"register"===Zn(i)?"Register":"Login")),mr(e,n)},$$slots:{default:!0}}),mr(e,h),He(),s()}var hi=vr("<span><!></span>");const gi={hash:"svelte-16bhghv",code:".badge.svelte-16bhghv {display:inline-block;padding:2px 8px;border-radius:99px;font-size:11px;font-weight:500;border:1px solid transparent;}.badge-default.svelte-16bhghv {background:var(--primary);color:var(--primary-foreground);}.badge-secondary.svelte-16bhghv {background:var(--accent);color:var(--text-secondary);border-color:var(--border);}.badge-success.svelte-16bhghv {background:var(--success-light);color:var(--success);}.badge-destructive.svelte-16bhghv {background:var(--error-light);color:var(--error);}"};function mi(e,t){Fr(e,gi);let n=fs(t,"variant",8,"default");var r=hi();Mr(Qt(r),t,"default",{}),hn(()=>{var e;return Wr(r,0,`badge badge-${null!=(e=n())?e:""}`,"svelte-16bhghv")}),mr(e,r)}var wi=vr('<div class="card create-form svelte-1vmhug3"><!> <!> <div class="create-actions svelte-1vmhug3"><!> <!></div></div>'),xi=vr('<div class="search-wrapper svelte-1vmhug3"><input class="search-input svelte-1vmhug3" type="text" placeholder="Search projects…"/></div>'),bi=vr('<div class="loading-state svelte-1vmhug3"><div class="spinner svelte-1vmhug3"></div> <span class="text-secondary svelte-1vmhug3">Loading projects…</span></div>'),yi=vr('<div class="empty-state svelte-1vmhug3"><div class="empty-icon svelte-1vmhug3">📁</div> <p>No projects yet.</p> <p class="text-sm text-secondary svelte-1vmhug3">Create your first project to start publishing designs.</p></div>'),ki=vr('<div class="empty-state svelte-1vmhug3"><p class="text-secondary svelte-1vmhug3">No matching projects.</p></div>'),qi=vr('<button class="card card-clickable svelte-1vmhug3"><div class="card-content svelte-1vmhug3"><div class="card-left svelte-1vmhug3"><div class="card-title svelte-1vmhug3"> </div> <div class="card-meta svelte-1vmhug3"> </div></div> <!></div></button>'),$i=vr('<div class="projects-list svelte-1vmhug3"></div>'),_i=vr('<div class="projects-view svelte-1vmhug3"><div class="projects-header svelte-1vmhug3"><span class="section-title svelte-1vmhug3">Your Projects</span> <!></div> <!> <!> <!> <!></div>');const ji={hash:"svelte-1vmhug3",code:".projects-view.svelte-1vmhug3 {\n\t\tanimation: svelte-1vmhug3-fadeIn 200ms ease;}.projects-header.svelte-1vmhug3 {display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;}.section-title.svelte-1vmhug3 {font-size:13px;font-weight:500;color:var(--text-secondary);}.card.svelte-1vmhug3 {border:1px solid var(--border);border-radius:var(--radius-lg);padding:14px;background:var(--bg);transition:border-color var(--transition);}.create-form.svelte-1vmhug3 {margin-bottom:12px;}.create-form.svelte-1vmhug3 .form-group {margin-bottom:8px;}.create-actions.svelte-1vmhug3 {display:flex;gap:8px;}.search-wrapper.svelte-1vmhug3 {margin-bottom:12px;}.search-input.svelte-1vmhug3 {width:100%;padding:7px 10px;border:1px solid var(--input);border-radius:var(--radius);font-size:12px;font-family:var(--font);color:var(--text);background:transparent;outline:none;transition:border-color var(--transition),\n\t\t\tbox-shadow var(--transition);}.search-input.svelte-1vmhug3:focus {border-color:var(--ring);box-shadow:0 0 0 2px var(--bg),\n\t\t\t0 0 0 4px var(--ring);}.search-input.svelte-1vmhug3::placeholder {color:var(--text-muted);}.projects-list.svelte-1vmhug3 {display:flex;flex-direction:column;gap:8px;}.card-clickable.svelte-1vmhug3 {cursor:pointer;text-align:left;font-family:var(--font);font-size:13px;width:100%;}.card-clickable.svelte-1vmhug3:hover {border-color:var(--ring);background:var(--surface);}.card-content.svelte-1vmhug3 {display:flex;justify-content:space-between;align-items:center;}.card-left.svelte-1vmhug3 {flex:1;min-width:0;}.card-title.svelte-1vmhug3 {font-size:13px;font-weight:500;color:var(--text);}.card-meta.svelte-1vmhug3 {font-size:12px;color:var(--text-muted);margin-top:2px;}.loading-state.svelte-1vmhug3 {display:flex;flex-direction:column;align-items:center;gap:10px;padding:32px 16px;}.spinner.svelte-1vmhug3 {width:24px;height:24px;border:2.5px solid var(--border);border-top-color:var(--text-secondary);border-radius:50%;\n\t\tanimation: svelte-1vmhug3-spin 600ms linear infinite;}.text-secondary.svelte-1vmhug3 {color:var(--text-secondary);font-size:12px;}.text-sm.svelte-1vmhug3 {font-size:12px;}.empty-state.svelte-1vmhug3 {text-align:center;padding:32px 16px;color:var(--text-muted);}.empty-icon.svelte-1vmhug3 {font-size:36px;margin-bottom:8px;opacity:0.3;}\n\n\t@keyframes svelte-1vmhug3-spin {\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t@keyframes svelte-1vmhug3-fadeIn {\n\t\tfrom {\n\t\t\topacity: 0;\n\t\t\ttransform: translateY(4px);\n\t\t}\n\t\tto {\n\t\t\topacity: 1;\n\t\t\ttransform: translateY(0);\n\t\t}\n\t}"};function Si(e,t){Ye(t,!1),Fr(e,ji);const n=()=>us(js,"$appState",r),[r,s]=vs(),i=Ot(),a=Ot();let o=Ot(!0),l=Ot(""),c=Ot(!1),d=Ot(""),u=Ot(""),v=Ot(!1),f=Ot("");function p(e,t){Ss({selectedProjectId:e,selectedProjectName:t}),gs("saveLastProject",e),_s("publish")}async function h(){if(Zn(d).trim()){Lt(v,!0),Lt(l,"");try{const e=await async function(e,t,n){const r=await Bs(`${e}/projects`,{method:"POST",body:JSON.stringify({name:t,description:n||void 0})});if(!r.ok){const e=await r.json().catch(()=>({error:"Failed to create project"}));throw new Error(e.error||"Failed to create project")}return(await r.json()).project}(n().serverUrl,Zn(d).trim(),Zn(u).trim()||void 0);Ds(`Project "${e.name}" created!`,"success"),Lt(c,!1),Lt(d,""),Lt(u,""),p(e.id,e.name)}catch(e){Lt(l,e.message)}finally{Lt(v,!1)}}else Lt(l,"Please enter a project name.")}ps(()=>{!async function(){Lt(o,!0),Lt(l,"");try{Ss({projects:await async function(e){const t=await Bs(`${e}/projects`);if(!t.ok)throw new Error("Failed to load projects");return(await t.json()).projects||[]}(n().serverUrl)})}catch(e){Lt(l,e.message||"Failed to load projects")}finally{Lt(o,!1)}}()}),vn(()=>n(),()=>{Lt(i,n().projects)}),vn(()=>(Zn(f),Zn(i)),()=>{Lt(a,Zn(f)?Zn(i).filter(e=>e.name.toLowerCase().includes(Zn(f).toLowerCase())||(e.description||"").toLowerCase().includes(Zn(f).toLowerCase())):Zn(i))}),fn(),ts();var g=_i();or("keydown",Bt,function(e){"Enter"===e.key&&Zn(c)&&h(),"Escape"===e.key&&Lt(c,!1)});var m=Qt(g);Xs(en(Qt(m),2),{variant:"primary",size:"sm",$$events:{click:()=>Lt(c,!0)},children:(e,t)=>{mr(e,hr("+ New"))},$$slots:{default:!0}});var w=en(m,2);{let e=zt(()=>!!Zn(l));di(w,{type:"error",get message(){return Zn(l)},get show(){return Zn(e)}})}var x=en(w,2),b=e=>{var t=wi(),n=Qt(t);oi(n,{placeholder:"Project name",get value(){return Zn(d)},set value(e){Lt(d,e)},$$legacy:!0});var r=en(n,2);oi(r,{placeholder:"Description (optional)",get value(){return Zn(u)},set value(e){Lt(u,e)},$$legacy:!0});var s=Qt(en(r,2));Xs(s,{variant:"primary",size:"sm",get loading(){return Zn(v)},$$events:{click:h},children:(e,t)=>{mr(e,hr("Create"))},$$slots:{default:!0}}),Xs(en(s,2),{variant:"secondary",size:"sm",$$events:{click:()=>Lt(c,!1)},children:(e,t)=>{mr(e,hr("Cancel"))},$$slots:{default:!0}}),mr(e,t)};qr(x,e=>{Zn(c)&&e(b)});var y=en(x,2),k=e=>{var t=xi();Qr(Qt(t),()=>Zn(f),e=>Lt(f,e)),mr(e,t)};qr(y,e=>{Zn(i),er(()=>Zn(i).length>3)&&e(k)});var q=en(y,2),$=e=>{mr(e,bi())},_=e=>{var t=gr(),n=Xt(t),r=e=>{mr(e,yi())},s=e=>{var t=gr(),n=Xt(t),r=e=>{mr(e,ki())},s=e=>{var t=$i();Sr(t,5,()=>Zn(a),e=>e.id,(e,t)=>{var n=qi(),r=Qt(n),s=Qt(r),i=Qt(s),a=Qt(i),o=Qt(en(i,2));mi(en(s,2),{variant:"secondary",children:(e,n)=>{var r=hr();hn(()=>{var e;return xr(r,`${null!=(Zn(t),e=er(()=>Zn(t)._count?Zn(t)._count.versions:0))?e:""} versions`)}),mr(e,r)},$$slots:{default:!0}}),hn(()=>{var e;xr(a,`📁 ${null!=(Zn(t),e=er(()=>Zn(t).name))?e:""}`),xr(o,(Zn(t),er(()=>Zn(t).description||"No description")))}),or("click",n,()=>p(Zn(t).id,Zn(t).name)),mr(e,n)}),mr(e,t)};qr(n,e=>{Zn(a),er(()=>0===Zn(a).length)?e(r):e(s,!1)},!0),mr(e,t)};qr(n,e=>{Zn(a),Zn(i),er(()=>0===Zn(a).length&&0===Zn(i).length)?e(r):e(s,!1)},!0),mr(e,t)};qr(q,e=>{Zn(o)?e($):e(_,!1)}),mr(e,g),He(),s()}var zi=pr('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5m7-7l-7 7 7 7"></path></svg>'),Ii=vr('<div class="loading-state svelte-q4nu4q"><div class="spinner svelte-q4nu4q"></div> <span class="text-secondary svelte-q4nu4q">Extracting document…</span></div>'),Pi=pr('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 4v6h6"></path><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg> Refresh',1),Ei=pr('<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 5v14M5 12h14"></path></svg> New version',1),Mi=vr('<div class="version-loading svelte-q4nu4q"><div class="spinner-sm svelte-q4nu4q"></div> <span class="text-secondary text-xs svelte-q4nu4q">Loading versions…</span></div>'),Ui=vr("<option> </option>"),Ti=vr('<select class="version-select svelte-q4nu4q"><option>New version</option><!></select>'),Ni=vr('<div class="version-loading svelte-q4nu4q"><div class="spinner-sm svelte-q4nu4q"></div> <span class="text-secondary text-xs svelte-q4nu4q">Checking uploaded screens…</span></div>'),Ci=vr('<div class="version-note svelte-q4nu4q"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg> <span> </span></div>'),Oi=vr('<div class="version-loading svelte-q4nu4q"><div class="spinner-sm svelte-q4nu4q"></div> <span class="text-secondary text-xs svelte-q4nu4q">Loading lock…</span></div>'),Li=vr('<div class="lock-pill svelte-q4nu4q"><span> </span> <span class="text-secondary text-xs svelte-q4nu4q"> </span></div>'),Ai=vr('<div class="text-secondary text-xs svelte-q4nu4q">No active lock</div>'),Fi=vr('<div class="card-meta svelte-q4nu4q"> </div>'),Ri=vr('<div class="card-meta svelte-q4nu4q">New version will start at r1</div>'),Wi=vr('<div class="version-note svelte-q4nu4q"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg> <span> </span></div>'),Di=vr('<div class="text-secondary text-xs mt-2 svelte-q4nu4q">Upload Sketch file first, then upload screens.</div>'),Vi=vr('<div class="version-loading svelte-q4nu4q"><div class="spinner-sm svelte-q4nu4q"></div> <span class="text-secondary text-xs svelte-q4nu4q">Loading revisions…</span></div>'),Bi=vr('<div class="revision-item svelte-q4nu4q"><span> </span> <span class="text-secondary text-xs svelte-q4nu4q"> </span> <span class="text-secondary text-xs svelte-q4nu4q"> </span></div>'),Yi=vr('<div class="revision-list svelte-q4nu4q"></div>'),Hi=vr('<label class="check-item svelte-q4nu4q"><input type="checkbox" class="svelte-q4nu4q"/> <span class="artboard-label svelte-q4nu4q"> <span class="text-xs text-secondary svelte-q4nu4q"> </span> <!> <!></span></label>'),Ji=vr('<div class="page-group svelte-q4nu4q"><label class="check-item check-group-header svelte-q4nu4q"><input type="checkbox" class="svelte-q4nu4q"/> <span> <span class="text-secondary text-xs svelte-q4nu4q"> </span></span></label> <div class="check-group svelte-q4nu4q"></div></div>'),Ki=vr('<div class="doc-info card svelte-q4nu4q"><div class="doc-info-content svelte-q4nu4q"><div><div class="card-title svelte-q4nu4q"> </div> <div class="card-meta svelte-q4nu4q"> </div></div> <!></div></div> <div class="version-section card svelte-q4nu4q"><div class="version-header svelte-q4nu4q"><div class="version-label svelte-q4nu4q">Version</div> <!></div> <!> <!></div> <div class="handoff-section card svelte-q4nu4q"><div class="version-header svelte-q4nu4q"><div class="version-label svelte-q4nu4q">Handoff Lock</div> <div class="lock-actions svelte-q4nu4q"><!> <!> <!></div></div> <!></div> <div class="revision-section card svelte-q4nu4q"><div class="version-label svelte-q4nu4q">Revision Target</div> <!> <!> <!> <div class="note-field svelte-q4nu4q"><label for="checkin-note" class="text-xs text-secondary svelte-q4nu4q">Check-in note *</label> <textarea id="checkin-note" class="note-input svelte-q4nu4q" placeholder="What changed in this handoff?" rows="3"></textarea></div></div> <div class="select-actions svelte-q4nu4q"><label class="check-item svelte-q4nu4q"><input type="checkbox" class="svelte-q4nu4q"/> <span class="text-sm svelte-q4nu4q"> </span></label></div> <!> <div class="publish-options svelte-q4nu4q"><label class="check-item svelte-q4nu4q"><input type="checkbox" id="opt-tokens" checked="" class="svelte-q4nu4q"/> <span>Include design tokens (colors, text styles)</span></label></div>',1),Gi=vr('<div class="publish-view svelte-q4nu4q"><div class="publish-header svelte-q4nu4q"><!> <div><div class="section-title svelte-q4nu4q">Publish to</div> <div class="project-name svelte-q4nu4q"> </div></div></div> <!> <!></div>');const Zi={hash:"svelte-q4nu4q",code:".publish-view.svelte-q4nu4q {\n\t\tanimation: svelte-q4nu4q-fadeIn 200ms ease;}.publish-header.svelte-q4nu4q {display:flex;align-items:center;gap:8px;margin-bottom:12px;}.section-title.svelte-q4nu4q {font-size:11px;font-weight:500;color:var(--text-muted);margin:0;}.project-name.svelte-q4nu4q {font-weight:600;font-size:14px;letter-spacing:-0.2px;}.card.svelte-q4nu4q {border:1px solid var(--border);border-radius:var(--radius-lg);padding:14px;background:var(--bg);margin-bottom:12px;}.doc-info-content.svelte-q4nu4q {display:flex;justify-content:space-between;align-items:center;}.card-title.svelte-q4nu4q {font-size:13px;font-weight:500;color:var(--text);}.card-meta.svelte-q4nu4q {font-size:12px;color:var(--text-muted);margin-top:2px;}.version-section.svelte-q4nu4q {padding:12px 14px;}.handoff-section.svelte-q4nu4q,\n\t.revision-section.svelte-q4nu4q {padding:12px 14px;}.version-header.svelte-q4nu4q {display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;}.lock-actions.svelte-q4nu4q {display:flex;gap:6px;}.lock-pill.svelte-q4nu4q {display:flex;flex-direction:column;gap:2px;padding:8px;border:1px solid var(--border);border-radius:var(--radius);background:var(--surface);font-size:12px;}.revision-list.svelte-q4nu4q {display:flex;flex-direction:column;gap:6px;margin-top:8px;}.revision-item.svelte-q4nu4q {display:flex;align-items:center;gap:8px;font-size:12px;}.note-field.svelte-q4nu4q {margin-top:10px;display:flex;flex-direction:column;gap:6px;}.note-input.svelte-q4nu4q {width:100%;border:1px solid var(--input);border-radius:var(--radius);padding:8px;font-size:12px;font-family:var(--font);color:var(--text);background:transparent;resize:vertical;}.version-label.svelte-q4nu4q {font-size:13px;font-weight:500;color:var(--text-secondary);}.version-select.svelte-q4nu4q {width:100%;padding:7px 10px;border:1px solid var(--input);border-radius:var(--radius);font-size:12px;font-family:var(--font);color:var(--text);background:transparent;outline:none;cursor:pointer;transition:border-color var(--transition),\n\t\t\tbox-shadow var(--transition);-webkit-appearance:none;appearance:none;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23a1a1aa' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E\");background-repeat:no-repeat;background-position:right 8px center;padding-right:28px;}.version-select.svelte-q4nu4q:focus {border-color:var(--ring);box-shadow:0 0 0 2px var(--bg),\n\t\t\t0 0 0 4px var(--ring);}.version-note.svelte-q4nu4q {display:flex;align-items:center;gap:6px;margin-top:8px;padding:6px 8px;border-radius:var(--radius);background:var(--success-light);color:var(--success);font-size:11px;font-weight:500;}.version-loading.svelte-q4nu4q {display:flex;align-items:center;gap:6px;padding:6px 0;}.spinner-sm.svelte-q4nu4q {width:14px;height:14px;border:2px solid var(--border);border-top-color:var(--text-secondary);border-radius:50%;\n\t\tanimation: svelte-q4nu4q-spin 600ms linear infinite;}.select-actions.svelte-q4nu4q {margin-bottom:4px;padding:4px 0;border-bottom:1px solid var(--border);}.check-item.svelte-q4nu4q {display:flex;align-items:center;gap:8px;padding:6px 0;font-size:13px;cursor:pointer;}.check-item.svelte-q4nu4q input[type='checkbox']:where(.svelte-q4nu4q) {width:16px;height:16px;accent-color:var(--color-blue-600);flex-shrink:0;cursor:pointer;}.check-group-header.svelte-q4nu4q {font-weight:500;color:var(--text);padding:8px 0 4px;}.check-group.svelte-q4nu4q {margin-left:24px;}.artboard-label.svelte-q4nu4q {display:flex;align-items:center;gap:6px;flex-wrap:wrap;}.page-group.svelte-q4nu4q {margin-bottom:4px;}.publish-options.svelte-q4nu4q {margin-top:12px;padding-top:8px;border-top:1px solid var(--border);}.text-secondary.svelte-q4nu4q {color:var(--text-secondary);}.text-xs.svelte-q4nu4q {font-size:11px;}.text-sm.svelte-q4nu4q {font-size:12px;}.loading-state.svelte-q4nu4q {display:flex;flex-direction:column;align-items:center;gap:10px;padding:32px 16px;}.spinner.svelte-q4nu4q {width:24px;height:24px;border:2.5px solid var(--border);border-top-color:var(--text-secondary);border-radius:50%;\n\t\tanimation: svelte-q4nu4q-spin 600ms linear infinite;}\n\n\t@keyframes svelte-q4nu4q-spin {\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t@keyframes svelte-q4nu4q-fadeIn {\n\t\tfrom {\n\t\t\topacity: 0;\n\t\t\ttransform: translateY(4px);\n\t\t}\n\t\tto {\n\t\t\topacity: 1;\n\t\t\ttransform: translateY(0);\n\t\t}\n\t}"};function Qi(e,t){Ye(t,!1),Fr(e,Zi);const n=()=>us(js,"$appState",s),r=()=>us(Is,"$selectedArtboardIds",s),[s,i]=vs(),a=Ot(),o=Ot(),l=Ot(),c=Ot(),d=Ot(),u=Ot(),v=Ot(),f=Ot(),p=Ot(),h=Ot(),g=Ot(),m=Ot(),w=Ot(),x=Ot(),b=Ot(),y=Ot(),k=Ot(),q=Ot(),$=Ot(),_=Ot(),j=Ot();let S=Ot(""),z=Ot(!0),I=Ot(!1),P=Ot(!1),E=Ot(!1),M=Ot(!1);async function U(e){const t=n().selectedProjectId;if(t){Lt(M,!0);try{const r=await async function(e,t,n){const r=await Bs(`${e}/projects/${t}/versions/${n}/revisions`);if(!r.ok)throw new Error("Failed to load revisions");return(await r.json()).revisions||[]}(n().serverUrl,t,e),s=r.find(e=>"uploading"===e.status&&!!e.sketchArtifactId);Ss({versionRevisions:r,selectedRevisionId:(null==s?void 0:s.id)||null})}catch(r){console.warn("[PublishView] Failed to load revisions:",r.message),Ss({versionRevisions:[],selectedRevisionId:null})}finally{Lt(M,!1)}}}async function T(e){const t=e.target.value;if("__new__"===t)return Ms(),Zn(d).length>0&&Ps(Zn(d)),void Ss({versionRevisions:[],selectedRevisionId:null});Es(t),Ss({loadingVersionScreens:!0});try{const e=await Ys(n().serverUrl,n().selectedProjectId,t),r=new Set(e);Ss({alreadyUploadedIds:r,loadingVersionScreens:!1}),await U(t);Ps(Zn(d).filter(e=>!r.has(e)))}catch(r){console.warn("[PublishView] Failed to load uploaded screens:",r.message),Ss({alreadyUploadedIds:new Set,loadingVersionScreens:!1}),Ps(Zn(d))}}function N(){Ms(),Ss({versionRevisions:[],selectedRevisionId:null}),Zn(d).length>0&&Ps(Zn(d))}async function C(){const e=n().selectedProjectId;if(e){Lt(E,!0);try{Ss({handoffLock:await Hs(n().serverUrl,e,{versionId:Zn(f)||void 0})}),Ds("Project checked out for handoff.","success")}catch(t){Lt(S,t.message||"Failed to checkout lock")}finally{Lt(E,!1)}}}async function O(){const e=n().selectedProjectId;if(e){Lt(E,!0);try{await Js(n().serverUrl,e),Ss({handoffLock:null}),Ds("Handoff lock released.","success")}catch(t){Lt(S,t.message||"Failed to release lock")}finally{Lt(E,!1)}}}async function L(){const e=n().selectedProjectId;if(!e)return;const t=window.prompt("Override reason");if(t&&t.trim()){Lt(E,!0);try{const r=await async function(e,t,n){const r=await Bs(`${e}/projects/${t}/handoff/override`,{method:"POST",body:JSON.stringify(n)});if(!r.ok){const e=await r.json().catch(()=>({error:`Server returned ${r.status}`}));throw new Error(e.error||"Failed to override lock")}return(await r.json()).lock}(n().serverUrl,e,{reason:t.trim(),versionId:Zn(f)||void 0});Ss({handoffLock:r}),Ds("Lock overridden.","warning")}catch(r){Lt(S,r.message||"Failed to override lock")}finally{Lt(E,!1)}}}function A(){Lt(z,!0),Lt(S,""),gs("refreshDocument")}function F(){Zn(u)?Is.set(new Set):Ps(Zn(d))}function R(e){return e.every(e=>r().has(e.id))}function W(e){const t=e.map(e=>e.id),n=R(e);var r,s;r=t,s=!n,Is.update(e=>{const t=new Set(e);return r.forEach(e=>{s?t.add(e):t.delete(e)}),t})}ps(()=>{const e=ms("documentData",e=>{if(Lt(z,!1),Lt(S,""),!n().selectedVersionId){Ps(e.pages.flatMap(e=>e.artboards.map(e=>e.id)))}}),t=ms("extractError",e=>{Lt(z,!1),Lt(S,e.message)});return gs("extractDocument"),Lt(z,!0),async function(){const e=n().selectedProjectId;if(!e)return;Lt(I,!0);try{const t=await async function(e,t){const n=await Bs(`${e}/projects/${t}`);if(!n.ok)throw new Error("Failed to load project details");return(await n.json()).project}(n().serverUrl,e);Ss({projectVersions:t.versions||[]}),!n().selectedVersionId&&t.versions&&t.versions.length>0?(Es(t.versions[0].id),await U(t.versions[0].id)):n().selectedVersionId&&await U(n().selectedVersionId)}catch(t){console.warn("[PublishView] Failed to load versions:",t.message),Ss({projectVersions:[]})}finally{Lt(I,!1)}}(),async function(){const e=n().selectedProjectId;if(!e)return;Lt(P,!0);try{const t=await async function(e,t){const n=await Bs(`${e}/projects/${t}/handoff/lock`);if(!n.ok)throw new Error("Failed to load handoff lock");return(await n.json()).lock||null}(n().serverUrl,e);Ss({handoffLock:t})}catch(t){console.warn("[PublishView] Failed to load lock:",t.message)}finally{Lt(P,!1)}}(),()=>{e(),t()}}),vn(()=>n(),()=>{Lt(a,n().documentData)}),vn(()=>r(),()=>{Lt(o,r().size)}),vn(()=>Zn(a),()=>{Lt(l,Zn(a)?Zn(a).pages.reduce((e,t)=>e+t.artboards.length,0):0)}),vn(()=>Zn(a),()=>{Lt(c,Zn(a)?Zn(a).pages.reduce((e,t)=>e+t.artboards.reduce((e,t)=>e+t.flowCount,0),0):0)}),vn(()=>Zn(a),()=>{Lt(d,Zn(a)?Zn(a).pages.flatMap(e=>e.artboards.map(e=>e.id)):[])}),vn(()=>(Zn(d),r()),()=>{Lt(u,Zn(d).length>0&&Zn(d).every(e=>r().has(e)))}),vn(()=>n(),()=>{Lt(v,n().projectVersions)}),vn(()=>n(),()=>{Lt(f,n().selectedVersionId)}),vn(()=>n(),()=>{Lt(p,n().alreadyUploadedIds)}),vn(()=>Zn(p),()=>{Lt(h,Zn(p).size)}),vn(()=>n(),()=>{Lt(g,n().loadingVersionScreens)}),vn(()=>n(),()=>{Lt(m,n().handoffLock)}),vn(()=>n(),()=>{Lt(w,n().versionRevisions)}),vn(()=>n(),()=>{Lt(x,n().selectedRevisionId)}),vn(()=>n(),()=>{Lt(b,n().checkinNote)}),vn(()=>(Zn(v),Zn(f)),()=>{Lt(y,Zn(v).find(e=>e.id===Zn(f))||null)}),vn(()=>Zn(w),()=>{var e;Lt(k,((null==(e=Zn(w)[0])?void 0:e.revisionNumber)||0)+1)}),vn(()=>(Zn(w),Zn(x)),()=>{Lt(q,Zn(w).find(e=>e.id===Zn(x))||null)}),vn(()=>Zn(q),()=>{Lt($,!!Zn(q)&&"uploading"===Zn(q).status&&!!Zn(q).sketchArtifactId)}),vn(()=>(Zn(f),r(),Zn(p),Zn(o)),()=>{Lt(_,Zn(f)?[...r()].filter(e=>!Zn(p).has(e)).length:Zn(o))}),vn(()=>(Zn(f),r(),Zn(p)),()=>{Lt(j,Zn(f)?[...r()].filter(e=>Zn(p).has(e)).length:0)}),fn(),ts();var D=Gi();or("keydown",Bt,function(e){"Escape"===e.key&&_s("projects"),(e.metaKey||e.ctrlKey)&&"a"===e.key&&(e.preventDefault(),F())});var V=Qt(D),B=Qt(V);Xs(B,{variant:"ghost",size:"sm",$$events:{click:()=>_s("projects")},children:(e,t)=>{mr(e,zi())},$$slots:{default:!0}});var Y=en(B,2),H=en(Qt(Y),2),J=Qt(H),K=en(V,2);{let e=zt(()=>!!Zn(S));di(K,{type:"error",get message(){return Zn(S)},get show(){return Zn(e)}})}var G=en(K,2),Z=e=>{mr(e,Ii())},Q=e=>{var t=gr(),n=Xt(t),s=e=>{var t=Ki(),n=Xt(t),s=Qt(n),i=Qt(s),d=Qt(i),x=Qt(d),_=Qt(en(d,2));Xs(en(i,2),{variant:"secondary",size:"sm",$$events:{click:A},children:(e,t)=>{mr(e,Pi())},$$slots:{default:!0}});var j=en(n,2),S=Qt(j);Xs(en(Qt(S),2),{variant:"secondary",size:"sm",$$events:{click:N},children:(e,t)=>{mr(e,Ei())},$$slots:{default:!0}});var z=en(S,2),U=e=>{mr(e,Mi())},D=e=>{var t,n=Ti(),r=Qt(n);r.value=r.__value="__new__",Sr(en(r),3,()=>Zn(v),e=>e.id,(e,t,n)=>{var r=Ui(),s=Qt(r),i={};hn(e=>{var a,o,l,c;xr(s,`v${null!=(Zn(v),tr(Zn(n)),a=er(()=>Zn(v).length-Zn(n)))?a:""}${null!=(Zn(t),o=er(()=>"complete"===Zn(t).status?"":" (uploading)"))?o:""}\n\t\t\t\t\t\t\t— ${null!=e?e:""}${null!=(Zn(t),l=er(()=>Zn(t)._count?` · ${Zn(t)._count.screens} screens`:""))?l:""}`),i!==(Zn(t),i=er(()=>Zn(t).id))&&(r.value=null!=(c=r.__value=(Zn(t),er(()=>Zn(t).id)))?c:"")},[()=>(Zn(t),er(()=>function(e){try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return e}}(Zn(t).createdAt)))]),mr(e,r)}),function(e){var t=new MutationObserver(()=>{Vr(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ln(()=>{t.disconnect()})}(n),hn(()=>{var e;t!==(t=Zn(f)||"__new__")&&(n.value=null!=(e=n.__value=Zn(f)||"__new__")?e:"",Vr(n,Zn(f)||"__new__"))}),or("change",n,T),mr(e,n)};qr(z,e=>{Zn(I)?e(U):e(D,!1)});var V=en(z,2),B=e=>{mr(e,Ni())},Y=e=>{var t=gr(),n=Xt(t),r=e=>{var t=Ci(),n=en(Qt(t),2),r=Qt(n);hn(()=>{var e;return xr(r,`${null!=(e=Zn(h))?e:""} screen${1!==Zn(h)?"s":""} already uploaded — check to overwrite`)}),mr(e,t)};qr(n,e=>{Zn(f)&&Zn(h)>0&&e(r)},!0),mr(e,t)};qr(V,e=>{Zn(g)?e(B):e(Y,!1)});var H=en(j,2),J=Qt(H),K=en(Qt(J),2),G=Qt(K);Xs(G,{variant:"secondary",size:"sm",get disabled(){return Zn(E)},$$events:{click:C},children:(e,t)=>{mr(e,hr("Checkout"))},$$slots:{default:!0}});var Z=en(G,2);Xs(Z,{variant:"secondary",size:"sm",get disabled(){return Zn(E)},$$events:{click:O},children:(e,t)=>{mr(e,hr("Release"))},$$slots:{default:!0}}),Xs(en(Z,2),{variant:"ghost",size:"sm",get disabled(){return Zn(E)},$$events:{click:L},children:(e,t)=>{mr(e,hr("Override"))},$$slots:{default:!0}});var Q=en(J,2),X=e=>{mr(e,Oi())},ee=e=>{var t=gr(),n=Xt(t),r=e=>{var t=Li(),n=Qt(t),r=Qt(n),s=Qt(en(n,2));hn(e=>{var t;xr(r,`Held by @${null!=(Zn(m),t=er(()=>Zn(m).holder.username))?t:""}`),xr(s,`expires ${null!=e?e:""}`)},[()=>(Zn(m),er(()=>new Date(Zn(m).expiresAt).toLocaleString()))]),mr(e,t)},s=e=>{mr(e,Ai())};qr(n,e=>{Zn(m)?e(r):e(s,!1)},!0),mr(e,t)};qr(Q,e=>{Zn(P)?e(X):e(ee,!1)});var te=en(H,2),ne=en(Qt(te),2),re=e=>{var t=Fi(),n=Qt(t);hn(()=>{var e,t;return xr(n,`Version ${null!=(Zn(y),e=er(()=>Zn(y).number))?e:""} / Next revision r${null!=(t=Zn(k))?t:""}`)}),mr(e,t)},se=e=>{mr(e,Ri())};qr(ne,e=>{Zn(y)?e(re):e(se,!1)});var ie=en(ne,2),ae=e=>{var t=Wi(),n=en(Qt(t),2),r=Qt(n);hn(()=>{var e;return xr(r,`Sketch uploaded for r${null!=(Zn(q),e=er(()=>{var e;return null==(e=Zn(q))?void 0:e.revisionNumber}))?e:""}. You can upload screens now.`)}),mr(e,t)},oe=e=>{mr(e,Di())};qr(ie,e=>{Zn($)?e(ae):e(oe,!1)});var le=en(ie,2),ce=e=>{mr(e,Vi())},de=e=>{var t=gr(),n=Xt(t),r=e=>{var t=Yi();Sr(t,5,()=>(Zn(w),er(()=>Zn(w).slice(0,3))),e=>e.id,(e,t)=>{var n=Bi(),r=Qt(n),s=Qt(r),i=en(r,2),a=Qt(i),o=Qt(en(i,2));hn(()=>{var e,n;xr(s,`r${null!=(Zn(t),e=er(()=>Zn(t).revisionNumber))?e:""}`),xr(a,(Zn(t),er(()=>Zn(t).status))),xr(o,`by @${null!=(Zn(t),n=er(()=>Zn(t).uploadedByUser.username))?n:""}`)}),mr(e,n)}),mr(e,t)};qr(n,e=>{Zn(w),er(()=>Zn(w).length>0)&&e(r)},!0),mr(e,t)};qr(le,e=>{Zn(M)?e(ce):e(de,!1)});var ue=en(le,2),ve=en(Qt(ue),2),fe=en(te,2),pe=Qt(fe),he=Qt(pe),ge=Qt(en(he,2));Sr(en(fe,2),1,()=>(Zn(a),er(()=>Zn(a).pages)),e=>e.name,(e,t)=>{var n=gr(),s=Xt(n),i=e=>{var n=Ji(),s=Qt(n),i=Qt(s),a=Qt(en(i,2)),o=Qt(en(a));Sr(en(s,2),5,()=>(Zn(t),er(()=>Zn(t).artboards)),e=>e.id,(e,t)=>{var n=Hi(),s=Qt(n),i=Qt(en(s,2)),a=en(i),o=Qt(a),l=en(a,2),c=e=>{mi(e,{variant:"success",children:(e,t)=>{mr(e,hr("Uploaded"))},$$slots:{default:!0}})};qr(l,e=>{Zn(p),Zn(t),er(()=>Zn(p).has(Zn(t).id))&&e(c)});var d=en(l,2),u=e=>{mi(e,{variant:"secondary",children:(e,n)=>{var r=hr();hn(()=>{var e;return xr(r,`${null!=(Zn(t),e=er(()=>Zn(t).flowCount))?e:""} flows`)}),mr(e,r)},$$slots:{default:!0}})};qr(d,e=>{Zn(t),er(()=>Zn(t).flowCount>0)&&e(u)}),hn(e=>{var n,r,a;Jr(s,e),xr(i,`${null!=(Zn(t),n=er(()=>Zn(t).name))?n:""} `),xr(o,`${null!=(Zn(t),r=er(()=>Zn(t).width))?r:""}×${null!=(Zn(t),a=er(()=>Zn(t).height))?a:""}`)},[()=>(r(),Zn(t),er(()=>r().has(Zn(t).id)))]),or("change",s,()=>{return e=Zn(t).id,void Is.update(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n});var e}),mr(e,n)}),hn(e=>{var n,r;Jr(i,e),xr(a,`${null!=(Zn(t),n=er(()=>Zn(t).name))?n:""} `),xr(o,`(${null!=(Zn(t),r=er(()=>Zn(t).artboards.length))?r:""})`)},[()=>(Zn(t),er(()=>R(Zn(t).artboards)))]),or("change",i,()=>W(Zn(t).artboards)),mr(e,n)};qr(s,e=>{Zn(t),er(()=>Zn(t).artboards.length>0)&&e(i)}),mr(e,n)}),hn(()=>{var e,t,n,r,s,i,d,v,f;xr(x,(Zn(a),er(()=>Zn(a).documentName))),xr(_,`${null!=(Zn(a),e=er(()=>Zn(a).pages.length))?e:""} page${null!=(Zn(a),t=er(()=>1!==Zn(a).pages.length?"s":""))?t:""} ·\n\t\t\t\t\t\t${null!=(n=Zn(l))?n:""} artboard${1!==Zn(l)?"s":""} ·\n\t\t\t\t\t\t${null!=(r=Zn(c))?r:""} prototype link${1!==Zn(c)?"s":""}`),d=ve,v=Zn(b),(f=Gr(d)).value!==(f.value=null!=v?v:void 0)&&(d.value!==v||0===v&&"PROGRESS"===d.nodeName)&&(d.value=null!=v?v:""),Jr(he,Zn(u)),xr(ge,`${Zn(u)?"Deselect all":"Select all"} (${null!=(s=Zn(o))?s:""}/${null!=(i=Zn(l))?i:""})`)}),or("input",ve,e=>Ss({checkinNote:e.currentTarget.value})),or("change",he,F),mr(e,t)};qr(n,e=>{Zn(a)&&e(s)},!0),mr(e,t)};qr(G,e=>{Zn(z)?e(Z):e(Q,!1)}),hn(()=>xr(J,(n(),er(()=>n().selectedProjectName)))),mr(e,D),He(),i()}var Xi=vr('<div class="progress-bar svelte-1dlms10"><div class="progress-fill svelte-1dlms10"></div></div>');const ea={hash:"svelte-1dlms10",code:".progress-bar.svelte-1dlms10 {width:100%;height:6px;background:var(--accent);border-radius:99px;overflow:hidden;}.progress-fill.svelte-1dlms10 {height:100%;background:var(--primary);border-radius:99px;transition:width 300ms ease;}"};function ta(e,t){Fr(e,ea);let n=fs(t,"percent",8,0);var r=Xi(),s=Qt(r);hn(()=>{var e;return Dr(s,`width: ${null!=(e=n())?e:""}%`)}),mr(e,r)}function na(e){var t;return null!=(t={creating:0,screens:1,tokens:2,finalizing:3,done:4,failed:-1}[e])?t:-1}var ra=vr('<span class="text-xs text-error svelte-ilqnti"> </span>'),sa=vr('<div><span class="status-icon svelte-ilqnti"> </span> <span class="artboard-name svelte-ilqnti"> </span> <!></div>'),ia=vr('<div class="artboard-status-list svelte-ilqnti"></div>'),aa=vr('<div class="error-state svelte-ilqnti"><div class="error-icon svelte-ilqnti">✕</div> <h3 class="svelte-ilqnti">Publish Failed</h3> <p class="text-secondary text-sm svelte-ilqnti"> </p></div> <!> <div class="progress-meta svelte-ilqnti"><span class="text-xs text-secondary svelte-ilqnti"> </span> <span class="text-xs text-secondary svelte-ilqnti"> </span></div> <!> <div class="resume-actions svelte-ilqnti"><p class="text-sm text-secondary resume-info svelte-ilqnti"> </p> <!> <!></div>',1),oa=vr('<span class="step-spinner svelte-ilqnti"></span>'),la=vr('<li><span class="step-icon svelte-ilqnti"><!></span> </li>'),ca=vr('<span class="mini-spinner svelte-ilqnti"></span>'),da=vr('<div><span class="status-icon svelte-ilqnti"><!></span> <span class="artboard-name svelte-ilqnti"> </span> <span class="text-xs text-muted svelte-ilqnti"> </span></div>'),ua=vr('<div class="artboard-status-list compact svelte-ilqnti"></div>'),va=vr('<p class="patience-msg svelte-ilqnti">This may take a while for large documents — please don\'t close the window.</p>'),fa=vr('<div class="active-state svelte-ilqnti"><div class="spinner-large svelte-ilqnti"></div> <h3 class="svelte-ilqnti">Publishing…</h3> <p class="text-secondary text-sm svelte-ilqnti"> </p></div> <!> <div class="progress-meta svelte-ilqnti"><span class="text-xs text-secondary svelte-ilqnti"> </span> <span class="text-xs text-secondary svelte-ilqnti"> </span></div> <ul class="progress-steps svelte-ilqnti"></ul> <!> <!> <div class="cancel-action svelte-ilqnti"><!></div>',1),pa=vr('<div class="progress-view svelte-ilqnti"><!></div>');const ha={hash:"svelte-ilqnti",code:".progress-view.svelte-ilqnti {\n\t\tanimation: svelte-ilqnti-fadeIn 200ms ease;}.active-state.svelte-ilqnti,\n\t.error-state.svelte-ilqnti {text-align:center;margin-top:16px;margin-bottom:12px;}.active-state.svelte-ilqnti h3:where(.svelte-ilqnti),\n\t.error-state.svelte-ilqnti h3:where(.svelte-ilqnti) {font-size:16px;font-weight:600;margin-bottom:4px;}.spinner-large.svelte-ilqnti {margin:0 auto 12px;width:32px;height:32px;border:3px solid var(--border);border-top-color:var(--text-secondary);border-radius:50%;\n\t\tanimation: svelte-ilqnti-spin 600ms linear infinite;}.error-icon.svelte-ilqnti {width:48px;height:48px;border-radius:50%;background:var(--error-light);color:var(--error);display:flex;align-items:center;justify-content:center;margin:0 auto 12px;font-size:24px;font-weight:700;}.progress-meta.svelte-ilqnti {display:flex;justify-content:space-between;align-items:center;margin-top:8px;}.progress-steps.svelte-ilqnti {list-style:none;margin:16px 0 0;padding:0;}.progress-step.svelte-ilqnti {padding:6px 0;font-size:12px;color:var(--text-muted);display:flex;align-items:center;gap:8px;transition:color 200ms ease;}.progress-step.active.svelte-ilqnti {color:var(--text);font-weight:500;}.progress-step.done.svelte-ilqnti {color:var(--success);}.step-icon.svelte-ilqnti {width:18px;height:18px;flex-shrink:0;display:flex;align-items:center;justify-content:center;}.step-spinner.svelte-ilqnti {width:14px;height:14px;border:2px solid var(--border);border-top-color:var(--text-secondary);border-radius:50%;\n\t\tanimation: svelte-ilqnti-spin 600ms linear infinite;}.artboard-status-list.svelte-ilqnti {margin-top:12px;max-height:200px;overflow-y:auto;border:1px solid var(--border);border-radius:var(--radius);padding:4px;}.artboard-status-list.compact.svelte-ilqnti {max-height:140px;font-size:11px;}.artboard-status.svelte-ilqnti {display:flex;align-items:center;gap:6px;padding:4px 8px;border-radius:4px;margin-bottom:5px;}.artboard-status.active.svelte-ilqnti {color:var(--text);background:var(--accent);}.artboard-status.done.svelte-ilqnti {color:var(--success);}.artboard-status.failed.svelte-ilqnti {color:var(--error);}.status-icon.svelte-ilqnti {width:14px;flex-shrink:0;text-align:center;}.artboard-name.svelte-ilqnti {flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}.mini-spinner.svelte-ilqnti {display:inline-block;width:10px;height:10px;border:1.5px solid var(--border);border-top-color:var(--text-secondary);border-radius:50%;\n\t\tanimation: svelte-ilqnti-spin 600ms linear infinite;}.patience-msg.svelte-ilqnti {text-align:center;font-size:11px;color:var(--text-muted);margin-top:12px;\n\t\tanimation: svelte-ilqnti-pulse 2s ease-in-out infinite;}.resume-actions.svelte-ilqnti {margin-top:20px;display:flex;flex-direction:column;gap:8px;align-items:center;}.resume-info.svelte-ilqnti {text-align:center;max-width:280px;}.cancel-action.svelte-ilqnti {text-align:center;margin-top:16px;}.text-secondary.svelte-ilqnti {color:var(--text-secondary);}.text-muted.svelte-ilqnti {color:var(--text-muted);}.text-error.svelte-ilqnti {color:var(--error);}.text-xs.svelte-ilqnti {font-size:11px;}.text-sm.svelte-ilqnti {font-size:12px;}\n\n\t@keyframes svelte-ilqnti-spin {\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t@keyframes svelte-ilqnti-pulse {\n\t\t0%,\n\t\t100% {\n\t\t\topacity: 1;\n\t\t}\n\t\t50% {\n\t\t\topacity: 0.5;\n\t\t}\n\t}\n\n\t@keyframes svelte-ilqnti-fadeIn {\n\t\tfrom {\n\t\t\topacity: 0;\n\t\t\ttransform: translateY(4px);\n\t\t}\n\t\tto {\n\t\t\topacity: 1;\n\t\t\ttransform: translateY(0);\n\t\t}\n\t}"};var ga=vr('<div class="success-view svelte-1ngze5u"><div class="success-content svelte-1ngze5u"><div class="success-icon svelte-1ngze5u">✓</div> <h3 class="svelte-1ngze5u">Published Successfully!</h3> <p class="text-secondary text-sm svelte-1ngze5u"> </p></div> <div class="stats svelte-1ngze5u"><div class="stat svelte-1ngze5u"><div class="stat-value svelte-1ngze5u"> </div> <div class="stat-label svelte-1ngze5u">Screens</div></div> <div class="stat svelte-1ngze5u"><div class="stat-value svelte-1ngze5u"> </div> <div class="stat-label svelte-1ngze5u">Prototype Links</div></div> <div class="stat svelte-1ngze5u"><div class="stat-value svelte-1ngze5u"> </div> <div class="stat-label svelte-1ngze5u">Design Tokens</div></div></div> <div class="actions svelte-1ngze5u"><!> <!></div></div>');const ma={hash:"svelte-1ngze5u",code:".success-view.svelte-1ngze5u {\n\t\tanimation: svelte-1ngze5u-fadeIn 200ms ease;}.success-content.svelte-1ngze5u {text-align:center;padding-top:24px;}.success-icon.svelte-1ngze5u {width:64px;height:64px;border-radius:50%;background:var(--success-light);color:var(--success);display:flex;align-items:center;justify-content:center;margin:0 auto 16px;font-size:32px;font-weight:700;}.success-content.svelte-1ngze5u h3:where(.svelte-1ngze5u) {font-size:18px;font-weight:600;}.text-secondary.svelte-1ngze5u {color:var(--text-secondary);}.text-sm.svelte-1ngze5u {font-size:12px;margin-top:4px;}.stats.svelte-1ngze5u {display:grid;grid-template-columns:repeat(3, 1fr);gap:8px;margin:16px 0;}.stat.svelte-1ngze5u {text-align:center;padding:10px;background:var(--accent);border-radius:var(--radius);}.stat-value.svelte-1ngze5u {font-size:20px;font-weight:600;color:var(--text);}.stat-label.svelte-1ngze5u {font-size:11px;color:var(--text-secondary);margin-top:2px;}.actions.svelte-1ngze5u {display:flex;flex-direction:column;gap:8px;margin-top:16px;}\n\n\t@keyframes svelte-1ngze5u-fadeIn {\n\t\tfrom {\n\t\t\topacity: 0;\n\t\t\ttransform: translateY(4px);\n\t\t}\n\t\tto {\n\t\t\topacity: 1;\n\t\t\ttransform: translateY(0);\n\t\t}\n\t}"};var wa=pr('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5m7-7l-7 7 7 7"></path></svg>'),xa=vr('<div class="section-title svelte-ote4ms">Account</div> <div class="card svelte-ote4ms"><div class="card-title svelte-ote4ms"> </div> <div class="card-meta svelte-ote4ms"> </div></div> <div class="logout-action svelte-ote4ms"><!></div>',1),ba=vr('<div class="settings-view svelte-ote4ms"><div class="settings-header svelte-ote4ms"><!> <span class="section-title svelte-ote4ms">Settings</span></div> <!> <!> <!> <div class="divider svelte-ote4ms"></div> <!></div>');const ya={hash:"svelte-ote4ms",code:".settings-view.svelte-ote4ms {\n\t\tanimation: svelte-ote4ms-fadeIn 200ms ease;}.settings-header.svelte-ote4ms {display:flex;align-items:center;gap:8px;margin-bottom:12px;}.section-title.svelte-ote4ms {font-size:11px;font-weight:500;color:var(--text-muted);margin-bottom:8px;}.divider.svelte-ote4ms {height:1px;background:var(--border);margin:16px 0;}.card.svelte-ote4ms {border:1px solid var(--border);border-radius:var(--radius-lg);padding:14px;background:var(--bg);}.card-title.svelte-ote4ms {font-size:13px;font-weight:500;color:var(--text);}.card-meta.svelte-ote4ms {font-size:12px;color:var(--text-secondary);margin-top:2px;}.logout-action.svelte-ote4ms {margin-top:12px;}\n\n\t@keyframes svelte-ote4ms-fadeIn {\n\t\tfrom {\n\t\t\topacity: 0;\n\t\t\ttransform: translateY(4px);\n\t\t}\n\t\tto {\n\t\t\topacity: 1;\n\t\t\ttransform: translateY(0);\n\t\t}\n\t}"};function ka(e){const t=e-1;return t*t*t+1}function qa(e){const t="string"==typeof e&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function $a(e,{delay:t=0,duration:n=400,easing:r=ka,x:s=0,y:i=0,opacity:a=0}={}){const o=getComputedStyle(e),l=+o.opacity,c="none"===o.transform?"":o.transform,d=l*(1-a),[u,v]=qa(s),[f,p]=qa(i);return{delay:t,duration:n,easing:r,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*u}${v}, ${(1-e)*f}${p});\n\t\t\topacity: ${l-d*t}`}}var _a=vr('<div><span class="toast-icon svelte-1kh4fkr"><!></span> <span class="toast-message svelte-1kh4fkr"> </span> <button class="toast-dismiss svelte-1kh4fkr">✕</button></div>'),ja=vr('<div class="toast-container svelte-1kh4fkr"></div>');const Sa={hash:"svelte-1kh4fkr",code:".toast-container.svelte-1kh4fkr {position:fixed;top:8px;left:8px;right:8px;z-index:1000;display:flex;flex-direction:column;gap:6px;pointer-events:none;}.toast.svelte-1kh4fkr {display:flex;align-items:center;gap:8px;padding:8px 12px;border-radius:var(--radius);font-size:12px;font-weight:500;pointer-events:all;box-shadow:var(--shadow);border:1px solid transparent;}.toast-success.svelte-1kh4fkr {background:var(--success-light);border-color:var(--success);color:#065f46;}.toast-error.svelte-1kh4fkr {background:var(--error-light);border-color:var(--error);color:#991b1b;}.toast-warning.svelte-1kh4fkr {background:var(--warning-light);border-color:var(--warning);color:#92400e;}.toast-info.svelte-1kh4fkr {background:var(--accent);border-color:var(--border);color:var(--text);}[data-theme='dark'] .toast-success {color:var(--success);}[data-theme='dark'] .toast-error {color:var(--error);}[data-theme='dark'] .toast-warning {color:var(--warning);}[data-theme='dark'] .toast-info {color:var(--text);}.toast-icon.svelte-1kh4fkr {font-weight:700;flex-shrink:0;}.toast-message.svelte-1kh4fkr {flex:1;}.toast-dismiss.svelte-1kh4fkr {background:none;border:none;cursor:pointer;color:inherit;opacity:0.6;padding:0 2px;font-size:12px;}.toast-dismiss.svelte-1kh4fkr:hover {opacity:1;}"};function za(e,t){Ye(t,!1),Fr(e,Sa);const n=()=>us(Ws,"$toasts",r),[r,s]=vs();ts();var i=gr(),a=Xt(i),o=e=>{var t=ja();Sr(t,5,n,e=>e.id,(e,t)=>{var n=_a(),r=Qt(n),s=Qt(r),i=e=>{mr(e,hr("✓"))},a=e=>{var n=gr(),r=Xt(n),s=e=>{mr(e,hr("✕"))},i=e=>{var n=gr(),r=Xt(n),s=e=>{mr(e,hr("⚠"))},i=e=>{mr(e,hr("ℹ"))};qr(r,e=>{"warning"===Zn(t).type?e(s):e(i,!1)},!0),mr(e,n)};qr(r,e=>{"error"===Zn(t).type?e(s):e(i,!1)},!0),mr(e,n)};qr(s,e=>{"success"===Zn(t).type?e(i):e(a,!1)});var o=en(r,2),l=Qt(o),c=en(o,2);hn(()=>{var e;Wr(n,0,`toast toast-${null!=(e=Zn(t).type)?e:""}`,"svelte-1kh4fkr"),xr(l,Zn(t).message)}),or("click",c,()=>Vs(Zn(t).id)),function(e,t,n,r){var s,i,a,o,l,c=!!(4&e),d=t.inert,u=t.style.overflow;function v(){return nn(()=>{var e;return null!=a?a:a=n()(t,null!=(e=null==r?void 0:r())?e:{},{direction:"both"})})}var f={is_global:c,in(){t.inert=d,o=Ar(t,v(),l,1,()=>{Nr(t,"introend"),null==o||o.abort(),o=a=void 0,t.style.overflow=u})},out(e){t.inert=!0,l=Ar(t,v(),o,0,()=>{Nr(t,"outroend"),null==e||e()})},stop:()=>{null==o||o.abort(),null==l||l.abort()}},p=Un;if((null!=(i=(s=p.nodes).t)?i:s.t=[]).push(f),wr){var h=c;if(!h){for(var g=p.parent;g&&0!==(g.f&je);)for(;(g=g.parent)&&0===(g.f&ge););h=!g||0!==(g.f&_e)}h&&un(()=>{er(()=>f.in())})}}(3,n,()=>$a,()=>({y:-20,duration:200})),mr(e,n)}),mr(e,t)};qr(a,e=>{n().length>0&&e(o)}),mr(e,i),He(),s()}var Ia=pr('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path></svg>'),Pa=vr('<div class="footer svelte-db2r4i"><div class="footer-actions svelte-db2r4i"><!> <!></div></div>'),Ea=vr('<div id="app-root" class="svelte-db2r4i"><div class="header svelte-db2r4i"><div class="header-title svelte-db2r4i"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="20" height="20" class="svelte-db2r4i"><path d="M3 7l6-4 6 4 6-4v14l-6 4-6-4-6 4z"></path><path d="M9 3v14"></path><path d="M15 7v14"></path></svg> Flow</div> <div class="header-actions svelte-db2r4i"><!></div></div> <div class="content svelte-db2r4i"><!></div> <!> <!></div>');const Ma={hash:"svelte-db2r4i",code:"#app-root.svelte-db2r4i {display:flex;flex-direction:column;height:100vh;}.header.svelte-db2r4i {display:flex;align-items:center;justify-content:space-between;padding:10px 16px;border-bottom:1px solid var(--border);background:var(--bg);flex-shrink:0;-webkit-app-region:drag;}.header-title.svelte-db2r4i {font-size:14px;font-weight:600;letter-spacing:-0.2px;color:var(--text);display:flex;align-items:center;gap:8px;}.header-title.svelte-db2r4i svg:where(.svelte-db2r4i) {opacity:0.7;}.header-actions.svelte-db2r4i {display:flex;align-items:center;gap:4px;-webkit-app-region:no-drag;}.content.svelte-db2r4i {flex:1;overflow-y:auto;padding:16px;}.footer.svelte-db2r4i {flex-shrink:0;padding:12px 16px;border-top:1px solid var(--border);background:var(--bg);}.footer-actions.svelte-db2r4i {display:grid;grid-template-columns:1fr;gap:8px;}"};var Ua,Ta;Ua=function(e,t){Ye(t,!1),Fr(e,Ma);const n=()=>us(qs,"$currentView",i),r=()=>us(Is,"$selectedArtboardIds",i),s=()=>us(js,"$appState",i),[i,a]=vs();let o=[];var l;ps(()=>{window.__onPluginMessage=function(e){const{type:t,payload:n}=e,r=hs.get(t);r&&r.forEach(e=>e(n))},ms("artboardData",e=>{const t=e.artboardId,n=ws.get(t);n&&(clearTimeout(n.timer),n.resolve(e),ws.delete(t))}),ms("artboardDataError",e=>{const t=e.artboardId,n=ws.get(t);n&&(clearTimeout(n.timer),n.reject(new Error(e.message)),ws.delete(t))}),ms("artboardImage",e=>{const t=e.artboardId,n=xs.get(t);n&&(clearTimeout(n.timer),n.resolve(e.imageBase64),xs.delete(t))}),ms("artboardImageError",e=>{const t=e.artboardId,n=xs.get(t);n&&(clearTimeout(n.timer),n.reject(new Error(e.message)),xs.delete(t))}),ms("sketchFileUploaded",e=>{const t=e.revisionId,n=bs.get(t);n&&(clearTimeout(n.timer),n.resolve(e.artifact),bs.delete(t))}),ms("sketchFileUploadError",e=>{const t=e.revisionId,n=bs.get(t);n&&(clearTimeout(n.timer),n.reject(new Error(e.message)),bs.delete(t))}),function(){const e=window.matchMedia("(prefers-color-scheme: dark)");function t(e){const t=e?"dark":"light";ks.set(t),document.documentElement.setAttribute("data-theme",t)}t(e.matches),e.addEventListener("change",e=>t(e.matches))}(),o.push(ms("init",e=>{var t,n;t=e.settings,n=e.initialView,Ss({serverUrl:t.serverUrl||"",authToken:t.authToken||"",userEmail:t.userEmail||"",userName:t.userName||"",lastProjectId:t.lastProjectId||""}),t.serverUrl&&t.authToken?_s("settings"===n?"settings":"projects"):(t.serverUrl,_s("settings"===n?"settings":"connect"))})),o.push(ms("navigate",e=>{_s(e.view)})),o.push(ms("settingsSaved",e=>{Ss({serverUrl:e.serverUrl})})),o.push(ms("authSaved",e=>{Ss({userEmail:e.email,userName:e.name})})),o.push(ms("loggedOut",()=>{Ss({authToken:"",userEmail:"",userName:""}),_s("connect")})),o.push(ms("documentData",e=>{Ss({documentData:e})}))}),l=()=>{o.forEach(e=>e()),As()},null===Ve&&Le(),ps(()=>()=>er(l));let c=null,d=Ot(!1);async function u(){const e=ls(js);if(e.selectedProjectId&&e.documentData)if(e.checkinNote.trim()){if(!Zn(d)){Lt(d,!0);try{let t=e.selectedVersionId;if(!t){Ds("Creating version…","info");const n=await async function(e,t){const n=await Bs(`${e}/projects/${t}/versions`,{method:"POST"});if(!n.ok)throw new Error("Failed to create version");return(await n.json()).version}(e.serverUrl,e.selectedProjectId);t=n.id,Ss({selectedVersionId:t,projectVersions:[n,...e.projectVersions]})}Ss({handoffLock:await Hs(e.serverUrl,e.selectedProjectId,{versionId:t})});const n=await async function(e,t,n,r){const s=await Bs(`${e}/projects/${t}/versions/${n}/revisions`,{method:"POST",body:JSON.stringify(r)});if(!s.ok){const e=await s.json().catch(()=>({error:`Server returned ${s.status}`}));throw new Error(e.error||"Failed to create revision")}return(await s.json()).revision}(e.serverUrl,e.selectedProjectId,t,{note:e.checkinNote.trim()}),r=await function(e,t=6e5){return new Promise((n,r)=>{const s=e.revisionId,i=bs.get(s);i&&(clearTimeout(i.timer),i.reject(new Error("Superseded by new upload request")));const a=setTimeout(()=>{bs.delete(s),r(new Error("Sketch file upload timed out"))},t);bs.set(s,{resolve:n,reject:r,timer:a}),gs("uploadSketchFile",e)})}({serverUrl:e.serverUrl,authToken:e.authToken,projectId:e.selectedProjectId,versionId:t,revisionId:n.id}),s={...n,sketchArtifactId:(null==r?void 0:r.id)||n.sketchArtifactId||null,sketchArtifact:r||null};Ns({versionId:t,revisionId:n.id}),Ss({selectedRevisionId:n.id,versionRevisions:[s,...e.versionRevisions.filter(e=>e.id!==n.id)]}),Ds(`Sketch file uploaded to r${n.revisionNumber}.`,"success")}catch(t){Ds(t.message||"Failed to upload Sketch file.","error")}finally{Lt(d,!1)}}}else Ds("Check-in note is required before uploading Sketch file.","warning")}async function v(e=!1){var t,n,r;const s=ls(js);if(!s.selectedProjectId||!s.documentData)return;const i=ls(Is);if(0===i.size)return void Ds("Please select at least one artboard to publish.","warning");const a=e?ls(Ts).versionId:s.selectedVersionId||ls(Ts).versionId,o=e?ls(Ts).revisionId:s.selectedRevisionId||ls(Ts).revisionId;if(!a||!o)return void Ds("Upload Sketch file first, then publish screens.","warning");const l=s.versionRevisions.find(e=>e.id===o);if(!e&&l&&"uploading"!==l.status)return void Ds("Selected revision is finalized. Upload a new Sketch file first.","warning");const d=[];s.documentData.pages.forEach(e=>{e.artboards.forEach(t=>{i.has(t.id)&&d.push({...t,pageName:e.name,status:"queued"})})}),c=new AbortController,e||Cs(),Ns({isPublishing:!0,versionId:a,revisionId:o,queue:d,step:"creating",percent:0,detail:e?"Resuming…":"Preparing screen upload…",error:null,cancelled:!1}),_s("progress"),Ns({startTime:Date.now()}),As(),Ls=setInterval(()=>{Ts.update(e=>{const t=Math.floor((Date.now()-e.startTime)/1e3),n=Math.floor(t/60),r=t%60;return{...e,elapsed:n>0?`${n}m ${r}s`:`${r}s`}})},1e3);try{let a=ls(Ts).versionId,o=ls(Ts).revisionId,l=new Set;if(Ns({step:"creating",detail:"Validating lock…",percent:2}),await Hs(s.serverUrl,s.selectedProjectId,{versionId:null!=a?a:void 0,revisionId:null!=o?o:void 0}),!a||!o)throw new Error("Missing prepared revision");Ns({detail:"Checking existing uploaded screens…",percent:4});const u=await Ys(s.serverUrl,s.selectedProjectId,a);l=e?new Set(u):new Set(u.filter(e=>!i.has(e))),Ns({uploadedIds:l}),Ns({step:"screens"});const v=d.filter(e=>!l.has(e.id));let f=d.length-v.length,p=0;d.forEach(e=>{l.has(e.id)&&Os(e.id,"done")});const g=new h(3),m=v.map(e=>g.acquire().then(async t=>{if(null==c?void 0:c.signal.aborted)t();else try{Os(e.id,"extracting"),Ns({detail:`Extracting: ${e.name}`,percent:Math.round(f/d.length*85)+5});const n=await function(e,t=6e4){return new Promise((n,r)=>{const s=ws.get(e);s&&(clearTimeout(s.timer),s.reject(new Error("Superseded by new request")));const i=setTimeout(()=>{ws.delete(e),r(new Error(`Artboard data extraction timed out for "${e}"`))},t);ws.set(e,{resolve:n,reject:r,timer:i}),gs("extractArtboardData",e)})}(e.id);if(null==c?void 0:c.signal.aborted)return void t();Os(e.id,"exporting"),Ns({detail:`Exporting: ${e.name}`});const r=await async function(e,t,n=3){let r;for(let i=1;i<=n;i++)try{return await ys(e)}catch(s){r=s,i<n&&await new Promise(e=>setTimeout(e,1e3))}throw r}(e.id,e.name);if(null==c?void 0:c.signal.aborted)return void t();Os(e.id,"uploading"),Ns({detail:`Uploading: ${e.name}`}),await async function(e,t,n,r){const s=r.imageBase64.replace(/^data:image\/\w+;base64,/,""),i=atob(s),a=new Uint8Array(i.length);for(let u=0;u<i.length;u++)a[u]=i.charCodeAt(u);const o=new Blob([a],{type:"image/png"}),l={name:r.name,sketchId:r.sketchId,pageName:r.pageName,width:r.width,height:r.height,layers:r.layers,flows:r.flows,displayOrder:r.displayOrder,isFlowHome:r.isFlowHome||!1,revisionId:r.revisionId},c=new FormData;c.append("image",o,`${r.sketchId}.png`),c.append("meta",JSON.stringify(l));const d=await Bs(`${e}/projects/${t}/versions/${n}/screens`,{method:"POST",headers:{},body:c});if(!d.ok){const e=await d.json().catch(()=>({error:`${d.status}`}));throw new Error(`Failed to upload "${r.name}": ${e.error||d.status}`)}}(s.serverUrl,s.selectedProjectId,a,{name:e.name,sketchId:e.id,pageName:e.pageName,width:e.width,height:e.height,imageBase64:r,layers:n.layers,flows:n.flows,displayOrder:e.displayOrder,isFlowHome:e.isFlowHome||!1,revisionId:o}),Os(e.id,"done"),f++,p+=(n.flows||[]).length,Ns({stats:{screens:f,flows:p,tokens:ls(Ts).stats.tokens},percent:Math.round(f/d.length*85)+5,detail:`Uploaded ${f}/${d.length}: ${e.name}`})}catch(n){throw Os(e.id,"failed",n.message),n}finally{t()}}));if(await Promise.all(m),null==c?void 0:c.signal.aborted)return;if(Ns({step:"tokens",percent:92,detail:"Uploading design tokens…"}),s.documentData.designTokens){const e=s.documentData.designTokens,i=((null==(t=e.colors)?void 0:t.length)||0)+((null==(n=e.textStyles)?void 0:n.length)||0)+((null==(r=e.layerStyles)?void 0:r.length)||0);Ns({stats:{...ls(Ts).stats,tokens:i}}),await async function(e,t,n,r){(await Bs(`${e}/projects/${t}/versions/${n}/tokens`,{method:"POST",body:JSON.stringify(r)})).ok||console.warn("[api] Token upload failed, continuing…")}(s.serverUrl,s.selectedProjectId,a,e)}if(null==c?void 0:c.signal.aborted)return;Ns({step:"finalizing",percent:97,detail:"Finalizing…"}),await async function(e,t,n,r){const s=await Bs(`${e}/projects/${t}/versions/${n}/revisions/${r}/complete`,{method:"PUT"});if(!s.ok){const e=await s.json().catch(()=>({error:`Server returned ${s.status}`}));throw new Error(e.error||"Failed to finalize revision")}}(s.serverUrl,s.selectedProjectId,a,o),Ns({step:"done",percent:100,detail:"Done!",isPublishing:!1}),As(),gs("publishComplete"),gs("showMessage",`✅ Published ${f} screens with ${p} prototype links!`),setTimeout(()=>_s("success"),400)}catch(u){if(null==c?void 0:c.signal.aborted)return;As(),Ns({step:"failed",error:u.message||"Publish failed.",isPublishing:!1})}}function f(){v(!0)}function p(){c&&c.abort();const e=ls(js);e.selectedProjectId&&Js(e.serverUrl,e.selectedProjectId).catch(()=>{}),As(),Ns({cancelled:!0,isPublishing:!1}),Cs(),_s("publish")}class h{constructor(e){J(this,"queue",[]),J(this,"active",0),J(this,"limit"),this.limit=e}acquire(){return new Promise(e=>{const t=()=>{this.active<this.limit?(this.active++,e(()=>{this.active--,this.queue.length>0&&this.queue.shift()()})):this.queue.push(t)};t()})}}ts();var g=Ea(),m=Qt(g),w=en(Qt(m),2),x=Qt(w),b=e=>{Xs(e,{variant:"ghost",size:"icon",$$events:{click:()=>_s("settings")},children:(e,t)=>{mr(e,Ia())},$$slots:{default:!0}})};qr(x,e=>{"settings"!==n()&&"progress"!==n()&&e(b)});var y=en(m,2),k=Qt(y),q=e=>{pi(e,{})},$=e=>{var t=gr(),r=Xt(t),s=e=>{Si(e,{})},i=e=>{var t=gr(),r=Xt(t),s=e=>{Qi(e,{})},i=e=>{var t=gr(),r=Xt(t),s=e=>{!function(e,t){Ye(t,!1),Fr(e,ha);const n=()=>us(Fs,"$publishProgress",r),[r,s]=vs(),i=Ot(),a=Ot();let o=fs(t,"onResume",8,()=>{}),l=fs(t,"onCancel",8,()=>{});function c(e){switch(e){case"done":return"✓";case"failed":return"✕";case"extracting":case"exporting":case"uploading":return"⟳";default:return"○"}}function d(e){switch(e){case"done":return"done";case"failed":return"failed";case"extracting":case"exporting":case"uploading":return"active";default:return""}}vn(()=>n(),()=>{Lt(i,n())}),vn(()=>Zn(i),()=>{Lt(a,Zn(i).elapsed&&parseInt(Zn(i).elapsed)>8)}),fn();var u=pa(),v=Qt(u),f=e=>{var t=aa(),n=Xt(t),r=en(Qt(n),4),s=Qt(r),a=en(n,2);ta(a,{get percent(){return Zn(i),er(()=>Zn(i).percent)}});var u=en(a,2),v=Qt(u),f=Qt(v),p=Qt(en(v,2)),h=en(u,2),g=e=>{var t=ia();Sr(t,5,()=>(Zn(i),er(()=>Zn(i).queue)),e=>e.id,(e,t)=>{var n=sa(),r=Qt(n),s=Qt(r),i=en(r,2),a=Qt(i),o=en(i,2),l=e=>{var n=ra(),r=Qt(n);hn(()=>xr(r,(Zn(t),er(()=>Zn(t).error)))),mr(e,n)};qr(o,e=>{Zn(t),er(()=>"failed"===Zn(t).status&&Zn(t).error)&&e(l)}),hn((e,r)=>{Wr(n,0,`artboard-status ${null!=e?e:""}`,"svelte-ilqnti"),xr(s,r),xr(a,(Zn(t),er(()=>Zn(t).name)))},[()=>(Zn(t),er(()=>d(Zn(t).status))),()=>(Zn(t),er(()=>c(Zn(t).status)))]),mr(e,n)}),mr(e,t)};qr(h,e=>{Zn(i),er(()=>Zn(i).queue.length>0)&&e(g)});var m=Qt(en(h,2)),w=Qt(m),x=en(m,2);Xs(x,{variant:"primary",$$events:{click(...e){var t;null==(t=o())||t.apply(this,e)}},children:(e,t)=>{mr(e,hr("Resume Upload"))},$$slots:{default:!0}}),Xs(en(x,2),{variant:"secondary",size:"sm",$$events:{click(...e){var t;null==(t=l())||t.apply(this,e)}},children:(e,t)=>{mr(e,hr("Cancel & Discard"))},$$slots:{default:!0}}),hn(()=>{var e,t,n;xr(s,(Zn(i),er(()=>Zn(i).error))),xr(f,`${null!=(Zn(i),e=er(()=>Zn(i).percent))?e:""}%`),xr(p,(Zn(i),er(()=>Zn(i).elapsed))),xr(w,`${null!=(Zn(i),t=er(()=>Zn(i).stats.screens))?t:""} of ${null!=(Zn(i),n=er(()=>Zn(i).queue.length))?n:""} screens uploaded. You can resume from where\n\t\t\t\tit stopped.`)}),mr(e,t)},p=e=>{var t=fa(),n=Xt(t),r=en(Qt(n),4),s=Qt(r),o=en(n,2);ta(o,{get percent(){return Zn(i),er(()=>Zn(i).percent)}});var u=en(o,2),v=Qt(u),f=Qt(v),p=Qt(en(v,2)),h=en(u,2);Sr(h,4,()=>["creating","screens","tokens","finalizing"],$r,(e,t)=>{const n=zt(()=>(Zn(i),er(()=>Zn(i).step===t))),r=zt(()=>(Zn(i),er(()=>na(Zn(i).step)>na(t))));var s=la();let a;var o=Qt(s),l=Qt(o),c=e=>{mr(e,hr("✓"))},d=e=>{var t=gr(),r=Xt(t),s=e=>{mr(e,oa())},i=e=>{mr(e,hr("○"))};qr(r,e=>{Zn(n)?e(s):e(i,!1)},!0),mr(e,t)};qr(l,e=>{Zn(r)?e(c):e(d,!1)});var u=en(o);hn(e=>{a=Wr(s,0,"progress-step svelte-ilqnti",null,a,{active:Zn(n),done:Zn(r)}),xr(u,` ${null!=e?e:""}`)},[()=>er(()=>function(e){switch(e){case"creating":return"Creating version…";case"screens":return"Uploading screens…";case"tokens":return"Uploading design tokens…";case"finalizing":return"Finalizing…";case"done":return"Done!";default:return e}}(t))]),mr(e,s)});var g=en(h,2),m=e=>{var t=ua();Sr(t,5,()=>(Zn(i),er(()=>Zn(i).queue)),e=>e.id,(e,t)=>{var n=da(),r=Qt(n),s=Qt(r),i=e=>{mr(e,ca())},a=e=>{var n=hr();hn(e=>xr(n,e),[()=>(Zn(t),er(()=>c(Zn(t).status)))]),mr(e,n)};qr(s,e=>{Zn(t),er(()=>"extracting"===Zn(t).status||"exporting"===Zn(t).status||"uploading"===Zn(t).status)?e(i):e(a,!1)});var o=en(r,2),l=Qt(o),u=Qt(en(o,2));hn(e=>{Wr(n,0,`artboard-status ${null!=e?e:""}`,"svelte-ilqnti"),xr(l,(Zn(t),er(()=>Zn(t).name))),xr(u,(Zn(t),er(()=>Zn(t).status)))},[()=>(Zn(t),er(()=>d(Zn(t).status)))]),mr(e,n)}),mr(e,t)};qr(g,e=>{Zn(i),er(()=>"screens"===Zn(i).step&&Zn(i).queue.length>0)&&e(m)});var w=en(g,2),x=e=>{mr(e,va())};qr(w,e=>{Zn(a)&&e(x)}),Xs(Qt(en(w,2)),{variant:"ghost",size:"sm",$$events:{click(...e){var t;null==(t=l())||t.apply(this,e)}},children:(e,t)=>{mr(e,hr("Cancel"))},$$slots:{default:!0}}),hn(()=>{var e;xr(s,(Zn(i),er(()=>Zn(i).detail))),xr(f,`${null!=(Zn(i),e=er(()=>Zn(i).percent))?e:""}%`),xr(p,(Zn(i),er(()=>Zn(i).elapsed)))}),mr(e,t)};qr(v,e=>{Zn(i),er(()=>Zn(i).error)?e(f):e(p,!1)}),mr(e,u),He(),s()}(e,{onResume:f,onCancel:p})},i=e=>{var t=gr(),r=Xt(t),s=e=>{!function(e,t){Ye(t,!1),Fr(e,ma);const n=()=>us(Ts,"$publishState",s),r=()=>us(js,"$appState",s),[s,i]=vs(),a=Ot(),o=Ot();vn(()=>n(),()=>{Lt(a,n().stats)}),vn(()=>r(),()=>{Lt(o,r().selectedProjectName)}),fn(),ts();var l=ga(),c=Qt(l),d=en(Qt(c),4),u=Qt(d),v=en(c,2),f=Qt(v),p=Qt(f),h=Qt(p),g=en(f,2),m=Qt(g),w=Qt(m),x=Qt(en(g,2)),b=Qt(x),y=Qt(en(v,2));Xs(y,{variant:"primary",block:!0,$$events:{click:function(){gs("openUrl",`${r().serverUrl}/projects/${r().selectedProjectId}`)}},children:(e,t)=>{mr(e,hr("Open in Browser"))},$$slots:{default:!0}}),Xs(en(y,2),{variant:"secondary",block:!0,$$events:{click:()=>_s("projects")},children:(e,t)=>{mr(e,hr("Back to Projects"))},$$slots:{default:!0}}),hn(()=>{var e;xr(u,`Version published to "${null!=(e=Zn(o))?e:""}"`),xr(h,(Zn(a),er(()=>Zn(a).screens))),xr(w,(Zn(a),er(()=>Zn(a).flows))),xr(b,(Zn(a),er(()=>Zn(a).tokens)))}),mr(e,l),He(),i()}(e,{})},i=e=>{var t=gr(),r=Xt(t),s=e=>{!function(e,t){Ye(t,!1),Fr(e,ya);const n=()=>us(js,"$appState",r),[r,s]=vs(),i=Ot(),a=Ot(),o=Ot();let l=Ot(n().serverUrl),c=Ot(""),d=Ot("success");function u(){n().serverUrl&&n().authToken?_s("projects"):_s("connect")}function v(){const e=Zn(l).replace(/\/+$/,"");return e?Ks(e)?(Ss({serverUrl:e}),gs("saveServerUrl",e),Lt(c,"Settings saved."),Lt(d,"success"),void setTimeout(()=>Lt(c,""),2e3)):(Lt(c,"Please enter a valid URL (http:// or https://)."),void Lt(d,"error")):(Lt(c,"Please enter a server URL."),void Lt(d,"error"))}function f(){zs(),Ds("Logged out successfully.","info"),_s("connect")}vn(()=>n(),()=>{Lt(i,!!n().authToken)}),vn(()=>n(),()=>{Lt(a,n().userEmail)}),vn(()=>n(),()=>{Lt(o,n().userName)}),fn(),ts();var p=ba();or("keydown",Bt,function(e){"Enter"===e.key&&v(),"Escape"===e.key&&u()});var h=Qt(p);Xs(Qt(h),{variant:"ghost",size:"sm",$$events:{click:u},children:(e,t)=>{mr(e,wa())},$$slots:{default:!0}});var g=en(h,2);{let e=zt(()=>!!Zn(c));di(g,{get type(){return Zn(d)},get message(){return Zn(c)},get show(){return Zn(e)}})}var m=en(g,2);oi(m,{label:"Server URL",type:"url",placeholder:"http://localhost:4400",get value(){return Zn(l)},set value(e){Lt(l,e)},$$legacy:!0});var w=en(m,2);Xs(w,{variant:"primary",block:!0,$$events:{click:v},children:(e,t)=>{mr(e,hr("Save"))},$$slots:{default:!0}});var x=en(w,4),b=e=>{var t=xa(),n=en(Xt(t),2),r=Qt(n),s=Qt(r),i=Qt(en(r,2));Xs(Qt(en(n,2)),{variant:"danger",size:"sm",block:!0,$$events:{click:f},children:(e,t)=>{mr(e,hr("Logout"))},$$slots:{default:!0}}),hn(()=>{xr(s,Zn(a)),xr(i,Zn(o)||"No name set")}),mr(e,t)};qr(x,e=>{Zn(i)&&e(b)}),mr(e,p),He(),s()}(e,{})};qr(r,e=>{"settings"===n()&&e(s)},!0),mr(e,t)};qr(r,e=>{"success"===n()?e(s):e(i,!1)},!0),mr(e,t)};qr(r,e=>{"progress"===n()?e(s):e(i,!1)},!0),mr(e,t)};qr(r,e=>{"publish"===n()?e(s):e(i,!1)},!0),mr(e,t)};qr(r,e=>{"projects"===n()?e(s):e(i,!1)},!0),mr(e,t)};qr(k,e=>{"connect"===n()?e(q):e($,!1)});var _=en(y,2),j=e=>{const t=zt(r),n=zt(()=>s().alreadyUploadedIds),a=zt(()=>s().selectedVersionId),o=zt(()=>s().selectedRevisionId||us(Ts,"$publishState",i).revisionId),l=zt(()=>Zn(a)?[...Zn(t)].filter(e=>!Zn(n).has(e)).length:Zn(t).size),c=zt(()=>Zn(a)?[...Zn(t)].filter(e=>Zn(n).has(e)).length:0);var f=Pa(),p=Qt(f),h=Qt(p);Xs(h,{variant:"secondary",block:!0,get disabled(){return Zn(d)},$$events:{click:()=>u()},children:(e,t)=>{var n=hr();hn(()=>xr(n,Zn(d)?"Uploading Sketch…":"1) Upload Sketch File")),mr(e,n)},$$slots:{default:!0}});var g=en(h,2);{let e=zt(()=>0===Zn(t).size||!Zn(o));Xs(g,{variant:"primary",block:!0,get disabled(){return Zn(e)},$$events:{click:()=>v()},children:(e,n)=>{var r=gr(),s=Xt(r),i=e=>{mr(e,hr("2) Upload Screens (upload sketch first)"))},d=e=>{var n=gr(),r=Xt(n),s=e=>{var n=hr();hn(()=>{var e;return xr(n,`2) Upload Screens (${null!=(e=Zn(t).size)?e:""} artboard${1!==Zn(t).size?"s":""})`)}),mr(e,n)},i=e=>{var t=gr(),n=Xt(t),r=e=>{var t=hr();hn(()=>{var e,n;return xr(t,`2) Upload Screens (${null!=(e=Zn(l))?e:""} new, ${null!=(n=Zn(c))?n:""} overwrite)`)}),mr(e,t)},s=e=>{var t=gr(),n=Xt(t),r=e=>{var t=hr();hn(()=>{var e;return xr(t,`2) Upload Screens (${null!=(e=Zn(c))?e:""} overwrite)`)}),mr(e,t)},s=e=>{var t=hr();hn(()=>{var e;return xr(t,`2) Upload Screens (${null!=(e=Zn(l))?e:""} new screen${1!==Zn(l)?"s":""})`)}),mr(e,t)};qr(n,e=>{Zn(c)>0?e(r):e(s,!1)},!0),mr(e,t)};qr(n,e=>{Zn(c)>0&&Zn(l)>0?e(r):e(s,!1)},!0),mr(e,t)};qr(r,e=>{Zn(a)?e(i,!1):e(s)},!0),mr(e,n)};qr(s,e=>{Zn(o)?e(d,!1):e(i)}),mr(e,r)},$$slots:{default:!0}})}mr(e,f)};qr(_,e=>{"publish"===n()&&e(j)}),za(en(_,2),{}),mr(e,g),He(),a()},Ta={target:document.getElementById("app")},function(e,{target:t,anchor:n,props:r={},events:s,context:i,intro:a=!0}){!function(){if(void 0===Bt){Bt=window,Yt=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Ht=ae(t,"firstChild").get,Jt=ae(t,"nextSibling").get,ue(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ue(n)&&(n.__t=void 0)}}();var o=new Set,l=e=>{for(var n=0;n<e.length;n++){var r=e[n];if(!o.has(r)){o.add(r);var s=sr(r);t.addEventListener(r,cr,{passive:s});var i=br.get(r);void 0===i?(document.addEventListener(r,cr,{passive:s}),br.set(r,1)):br.set(r,i+1)}}};l(se(ir)),ar.add(l);var c=void 0,d=function(e){pt.ensure();const t=an(524352,e,!0);return(e={})=>new Promise(n=>{e.outro?kn(t,()=>{bn(t),n(void 0)}):(bn(t),n(void 0))})}(()=>{var d=null!=n?n:t.appendChild(Kt());return function(e,t,n){new qt(e,t,n)}(d,{pending:()=>{}},t=>{Ye({}),i&&(Ve.c=i),s&&(r.$$events=s),wr=a,c=e(t,r)||{},wr=!0,He()}),()=>{var e;for(var r of o){t.removeEventListener(r,cr);var s=br.get(r);0===--s?(document.removeEventListener(r,cr),br.delete(r)):br.set(r,s)}ar.delete(l),d!==n&&(null==(e=d.parentNode)||e.removeChild(d))}});yr.set(c,d)}(Ua,Ta);</script>
		<style rel="stylesheet" crossorigin>:root,[data-theme=light]{--primary: #18181b;--primary-hover: #27272a;--primary-light: #f4f4f5;--primary-foreground: #fafafa;--bg: #ffffff;--surface: #fafafa;--surface-hover: #f4f4f5;--text: #09090b;--text-secondary: #71717a;--text-muted: #a1a1aa;--border: #e4e4e7;--input: #e4e4e7;--ring: #d4d4d8;--success: #16a34a;--success-light: #dcfce7;--error: #dc2626;--error-light: #fee2e2;--warning: #d97706;--warning-light: #fef3c7;--info: #2563eb;--info-light: #dbeafe;--destructive: #dc2626;--destructive-foreground: #fafafa;--accent: #f4f4f5;--accent-foreground: #18181b;--radius: 8px;--radius-lg: 10px;--shadow-sm: 0 1px 2px rgba(0, 0, 0, .04);--shadow: 0 1px 3px rgba(0, 0, 0, .06), 0 1px 2px rgba(0, 0, 0, .04);--transition: .15s ease;--font: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif}[data-theme=dark]{--primary: #fafafa;--primary-hover: #e4e4e7;--primary-light: #27272a;--primary-foreground: #18181b;--bg: #09090b;--surface: #18181b;--surface-hover: #27272a;--text: #fafafa;--text-secondary: #a1a1aa;--text-muted: #71717a;--border: #27272a;--input: #27272a;--ring: #3f3f46;--success: #22c55e;--success-light: #052e16;--error: #ef4444;--error-light: #450a0a;--warning: #eab308;--warning-light: #422006;--info: #3b82f6;--info-light: #172554;--destructive: #7f1d1d;--destructive-foreground: #fafafa;--accent: #27272a;--accent-foreground: #fafafa;--shadow-sm: 0 1px 2px rgba(0, 0, 0, .3);--shadow: 0 1px 3px rgba(0, 0, 0, .4), 0 1px 2px rgba(0, 0, 0, .3)}*,*:before,*:after{box-sizing:border-box;margin:0;padding:0}html,body{font-family:var(--font);font-size:13px;line-height:1.5;color:var(--text);background:var(--bg);height:100%;overflow:hidden;-webkit-font-smoothing:antialiased}#app{display:flex;flex-direction:column;height:100%}::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--border);border-radius:99px}::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}@keyframes spin{to{transform:rotate(360deg)}}@keyframes fadeIn{0%{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}@keyframes slideUp{0%{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}</style>
	</head>
	<body>
		<div id="app"></div>
	</body>
</html>
